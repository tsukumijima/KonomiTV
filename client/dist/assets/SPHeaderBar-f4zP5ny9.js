import{F as w,G as u,d as _,aA as I,ab as V,H as r,a1 as R,w as n,c as i,b4 as q,N as P,M as N,J as U,Z as f,L as h,aK as $,$ as E,aB as H,U as a,R as d,_ as K}from"./index-LUcZSfg3.js";import{_ as M}from"./BottomNavigation-DprrKkNz.js";import{V as A}from"./VSpacer-ChgMJFbm.js";const D={key:1,class:"search-box"},F={class:"search-box__icon"},T=["placeholder"],z=w({__name:"SPHeaderBar",setup(G){const y=H(),t=I(),p=u(null),o=u(!1),s=u(""),k=_(()=>{const e=t.path;return!e.startsWith("/captures")&&!e.startsWith("/settings")&&!e.startsWith("/login")&&!e.startsWith("/register")}),g=_(()=>m(t.path)?"録画番組やシリーズを検索...":"放送予定の番組を検索..."),m=e=>e.startsWith("/videos")||e.startsWith("/mylist")||e.startsWith("/watched-history"),S=()=>m(t.path)?"/videos/search":"/tv/search",x=()=>{o.value=!0,setTimeout(()=>{var e;(e=p.value)==null||e.focus()},0)},v=()=>{o.value=!1,s.value=""},C=()=>{if(s.value.trim()){const e=S();y.push(`${e}?query=${encodeURIComponent(s.value.trim())}`)}},b=e=>{e.key==="Enter"?C():e.key==="Escape"&&v()};return V(()=>{t.path.endsWith("/search")&&t.query.query&&(s.value=decodeURIComponent(t.query.query),o.value=!0)}),(e,c)=>{const B=f("router-link"),l=f("Icon");return a(),r("header",{class:E(["header",{"search-active":o.value}])},[o.value?(a(),r("div",D,[h("div",F,[i(l,{icon:"fluent:search-20-filled",height:"20px"})]),n(h("input",{ref_key:"searchInput",ref:p,type:"search",enterkeyhint:"search",placeholder:g.value,"onUpdate:modelValue":c[0]||(c[0]=W=>s.value=W),onKeydown:b},null,40,T),[[$,s.value]]),n((a(),r("div",{class:"search-box__close",onClick:v},[i(l,{icon:"fluent:dismiss-20-filled",height:"24px"})])),[[d]])])):(a(),r(R,{key:0},[n((a(),N(B,{class:"konomitv-logo",to:"/tv/"},{default:U(()=>[...c[1]||(c[1]=[h("img",{class:"konomitv-logo__image",src:M,height:"21"},null,-1)])]),_:1})),[[d]]),i(A),q(e.$slots,"timetable-controls",{},void 0,!0),k.value?n((a(),r("div",{key:0,class:"search-button",onClick:x},[i(l,{icon:"fluent:search-20-filled",height:"24px"})])),[[d]]):P("",!0)],64))],2)}}}),Z=K(z,[["__scopeId","data-v-6cf7eeb5"]]);export{Z as S};
