import{D as Ve,E as xe,T as ke,S as Pe,G as p,O as Ce,Y as $e,W as De,a as t,Q as ee,d as W,U as se,P as K,_ as Y,c as u,e as h,b as e,t as y,F as q,g as ae,r as Z,o,q as D,aJ as O,s as Q,x as ce,l as f,B as A,i as Re,n as L,w as N,k as j,h as _,V as I,M as T,R as z}from"./index-C90hjLTU.js";import{u as Se}from"./SPHeaderBar-Chf0UYUT.js";import{V as Ue}from"./VSwitch-DhhO6NGN.js";import{V as Be}from"./VSlider-DQxJb1-U.js";import{u as Ee,m as Ie,V as re,c as F}from"./VTextField-DDySwIAQ.js";import{m as Te,e as te,c as J}from"./VSelect-CWOpdxGi.js";import{u as Me,R as G}from"./ServerSettingsStore-vpXqLwW5.js";import{V as ne}from"./VDialog-CA4CK2fk.js";import{a as ie,V as oe,b as le,c as de}from"./VCard-BjWulXRM.js";import{V as ue}from"./ssrBoot-OnzqbV2B.js";const Le=xe({...Ie(),...$e(Te(),["inline"])},"VCheckbox"),Fe=Ve()({name:"VCheckbox",inheritAttrs:!1,props:Le(),emits:{"update:modelValue":s=>!0,"update:focused":s=>!0},setup(s,C){let{attrs:d,slots:k}=C;const m=ke(s,"modelValue"),{isFocused:n,focus:$,blur:v}=Ee(s),g=Pe(),R=p(()=>s.id||`checkbox-${g}`);return Ce(()=>{const[V,P]=De(d),S=re.filterProps(s),U=te.filterProps(s);return t(re,ee({class:["v-checkbox",s.class]},V,S,{modelValue:m.value,"onUpdate:modelValue":E=>m.value=E,id:R.value,focused:n.value,style:s.style}),{...k,default:E=>{let{id:w,messagesId:M,isDisabled:b,isReadonly:a,isValid:B}=E;return t(te,ee(U,{id:w.value,"aria-describedby":M.value,disabled:b.value,readonly:a.value},P,{error:B.value===!1,modelValue:m.value,"onUpdate:modelValue":l=>m.value=l,onFocus:$,onBlur:v}),k)}})}),{}}}),Ae=W({name:"ReservationProgramInfo",props:{reservation:{type:Object,default:null},program:{type:Object,default:null},channel:{type:Object,default:null}},data(){return{Utils:Object.freeze(se),ProgramUtils:Object.freeze(K)}},computed:{displayProgram(){var s;return((s=this.reservation)==null?void 0:s.program)??this.program},displayChannel(){var s;return((s=this.reservation)==null?void 0:s.channel)??this.channel}},methods:{onLogoError(s){const C=s.target;C.src=`${se.api_base_url}/channels/gr001/logo`}}}),Oe={key:0,class:"program-container"},He={class:"program-info"},Ne=["innerHTML"],je={class:"program-info__broadcaster"},ze=["src"],Je={class:"program-info__broadcaster-container"},Ge={class:"d-flex align-center"},Ke={class:"program-info__broadcaster-number"},qe={class:"program-info__broadcaster-name"},Qe={class:"program-info__broadcaster-time"},We=["innerHTML"],Ye={key:0,class:"program-info__genre-container"},Ze={class:"mt-5"},Xe={key:0,class:"program-info__status"},es={class:"ml-2"},ss={class:"program-info__status"},as={class:"ml-2"},rs={key:1,class:"program-info__status"},ts={class:"ml-2"},ns={class:"program-detail-container"},is={class:"program-detail__heading"},os=["innerHTML"];function ls(s,C,d,k,m,n){const $=Z("Icon");return s.displayProgram&&s.displayChannel?(o(),u("div",Oe,[e("section",He,[e("h1",{class:"program-info__title",innerHTML:s.ProgramUtils.decorateProgramInfo(s.displayProgram,"title")},null,8,Ne),e("div",je,[e("img",{class:"program-info__broadcaster-icon",src:`${s.Utils.api_base_url}/channels/${s.displayChannel.id}/logo`,onError:C[0]||(C[0]=(...v)=>s.onLogoError&&s.onLogoError(...v))},null,40,ze),e("div",Je,[e("div",Ge,[e("div",Ke,"Ch: "+y(s.displayChannel.channel_number),1),e("div",qe,y(s.displayChannel.name),1)]),e("div",Qe,y(s.ProgramUtils.getProgramTime(s.displayProgram)),1)])]),e("div",{class:"program-info__description",innerHTML:s.ProgramUtils.decorateProgramInfo(s.displayProgram,"description")},null,8,We),s.displayProgram.genres&&s.displayProgram.genres.length>0?(o(),u("div",Ye,[(o(!0),u(q,null,ae(s.displayProgram.genres,(v,g)=>(o(),u("div",{class:"program-info__genre",key:g},y(v.major)+" / "+y(v.middle),1))),128))])):h("",!0),e("div",Ze,[s.displayProgram.video_codec&&s.displayProgram.video_resolution?(o(),u("div",Xe,[t($,{icon:"fluent:video-16-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",es,"映像: "+y(s.displayProgram.video_codec)+" / "+y(s.displayProgram.video_resolution),1)])):h("",!0),e("div",ss,[t($,{icon:"fluent:headphones-sound-wave-20-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",as,"主音声: "+y(s.displayProgram.primary_audio_type)+" "+y(s.displayProgram.primary_audio_sampling_rate||"Unknown")+" / "+y(s.displayProgram.primary_audio_language),1)]),s.displayProgram.secondary_audio_type?(o(),u("div",rs,[t($,{icon:"fluent:headphones-sound-wave-20-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",ts,"副音声: "+y(s.displayProgram.secondary_audio_type)+" "+y(s.displayProgram.secondary_audio_sampling_rate||"Unknown")+" / "+y(s.displayProgram.secondary_audio_language),1)])):h("",!0)])]),e("section",ns,[(o(!0),u(q,null,ae(s.displayProgram.detail??{},(v,g)=>(o(),u("div",{class:"program-detail",key:g},[e("h2",is,y(g),1),e("div",{class:"program-detail__text",innerHTML:s.Utils.URLtoLink(v)},null,8,os)]))),128))])])):h("",!0)}const ds=Y(Ae,[["render",ls],["__scopeId","data-v-21faec51"]]),us={class:"reservation-recording-settings"},cs={key:0,class:"recording-warning-banner"},vs={class:"reservation-recording-settings__section"},gs={class:"reservation-recording-settings__header"},ms={class:"reservation-recording-settings__section"},_s={class:"reservation-recording-settings__slider"},ps={class:"reservation-recording-settings__section"},fs={class:"reservation-recording-settings__section"},bs={class:"reservation-recording-settings__section"},ys={class:"reservation-recording-settings__margin-default"},hs={class:"reservation-recording-settings__margin-controls"},ws={class:"reservation-recording-settings__section"},Vs={class:"reservation-recording-settings__section"},xs={class:"reservation-recording-settings__section"},ks={class:"reservation-recording-settings__section"},Ps={class:"reservation-recording-settings__description"},Cs=W({__name:"ReservationRecordingSettings",props:{reservation:{},hasChanges:{type:Boolean}},emits:["updateSettings","changesDetected"],setup(s,{emit:C}){const d=s,k=C,m=Se(),n=D(structuredClone(O(d.reservation.record_settings))),$=D(structuredClone(O(d.reservation.record_settings))),v=p({get:()=>n.value.recording_folders.length>0?n.value.recording_folders[0].recording_folder_path:"",set:b=>{R(b,g.value)}}),g=p({get:()=>n.value.recording_folders.length>0&&n.value.recording_folders[0].recording_file_name_template||"",set:b=>{R(v.value,b)}}),R=(b,a)=>{const B=b.trim()!=="",l=a.trim()!=="";!B&&!l?n.value.recording_folders=[]:(n.value.recording_folders.length===0&&n.value.recording_folders.push({recording_folder_path:"",recording_file_name_template:null,is_oneseg_separate_recording_folder:!1}),n.value.recording_folders[0].recording_folder_path=b,n.value.recording_folders[0].recording_file_name_template=a||null)},V=D(n.value.recording_start_margin===null&&n.value.recording_end_margin===null),P=[{title:"デフォルト設定を使う",value:"Default"},{title:"録画する",value:"Enable"},{title:"録画しない",value:"Disable"}],S=[{title:"デフォルト設定を使う",value:"Default"},{title:"録画する",value:"Enable"},{title:"録画しない",value:"Disable"}],U=[{title:"デフォルト設定を使う",value:"Default"},{title:"何もしない",value:"Nothing"},{title:"スタンバイ",value:"Standby"},{title:"スタンバイ(復帰後再起動)",value:"StandbyAndReboot"},{title:"サスペンド",value:"Suspend"},{title:"サスペンド(復帰後再起動)",value:"SuspendAndReboot"},{title:"シャットダウン",value:"Shutdown"}],E=p(()=>JSON.stringify(n.value)!==JSON.stringify($.value));Q(E,b=>{k("changesDetected",b)});const w=()=>{k("updateSettings",n.value)},M=()=>{V.value?(n.value.recording_start_margin=null,n.value.recording_end_margin=null):(n.value.recording_start_margin=10,n.value.recording_end_margin=5),w()};return Q(()=>d.reservation,b=>{n.value=structuredClone(O(b.record_settings)),$.value=structuredClone(O(b.record_settings))},{deep:!0}),ce(async()=>{await m.fetchServerVersion()}),(b,a)=>{const B=Z("Icon");return o(),u("div",us,[s.reservation.is_recording_in_progress?(o(),u("div",cs,[t(B,{icon:"fluent:warning-16-filled",class:"recording-warning-banner__icon"}),a[11]||(a[11]=e("span",{class:"recording-warning-banner__text"}," 録画中の録画設定の変更はできません。 ",-1))])):h("",!0),e("div",vs,[e("div",gs,[a[12]||(a[12]=e("div",{class:"reservation-recording-settings__label"},"録画予約の有効/無効",-1)),t(Ue,{disabled:s.reservation.is_recording_in_progress,style:{height:"0","margin-top":"-40px","margin-right":"6px"},modelValue:n.value.is_enabled,"onUpdate:modelValue":[a[0]||(a[0]=l=>n.value.is_enabled=l),w],color:"primary",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),a[13]||(a[13]=e("div",{class:"reservation-recording-settings__description mb-0"},[f(" 予約が無効なときは、この番組の録画動作を行いません。"),e("br"),f(" キーワード自動予約条件により不必要な番組が予約されてしまっているときは、予約を無効にしてみてください。(予約削除ではすぐ再追加されてしまい意味がありません。) ")],-1))]),e("div",ms,[a[14]||(a[14]=e("div",{class:"reservation-recording-settings__label"},"録画予約の優先度",-1)),a[15]||(a[15]=e("div",{class:"reservation-recording-settings__description mb-0"}," 放送時間が重なりチューナーが足りないときは、より優先度が高い予約から優先的に録画します。 ",-1)),e("div",_s,[t(Be,{disabled:s.reservation.is_recording_in_progress,modelValue:n.value.priority,"onUpdate:modelValue":[a[1]||(a[1]=l=>n.value.priority=l),w],min:1,max:5,step:1,color:"primary",density:"compact","show-ticks":"always","thumb-label":"","hide-details":""},null,8,["disabled","modelValue"])])]),e("div",ps,[a[16]||(a[16]=e("div",{class:"reservation-recording-settings__label"},"録画フォルダのパス",-1)),a[17]||(a[17]=e("div",{class:"reservation-recording-settings__description"}," 空欄にすると、デフォルトの録画フォルダに保存されます。 ",-1)),t(F,{disabled:s.reservation.is_recording_in_progress,modelValue:v.value,"onUpdate:modelValue":[a[2]||(a[2]=l=>v.value=l),w],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:A(m).is_linux_environment?"/mnt/hdd/Records/2025年春アニメ":"E:\\Records\\2025年春アニメ"},null,8,["disabled","modelValue","placeholder"])]),e("div",fs,[a[18]||(a[18]=Re('<div class="reservation-recording-settings__label" data-v-de631340>録画ファイル名テンプレート (マクロ)</div><div class="reservation-recording-settings__description" data-v-de631340> 空欄にすると、デフォルトの録画ファイル名テンプレート (マクロ) が録画ファイル名の変更に利用されます。<br data-v-de631340><div class="mt-1" data-v-de631340><a class="link" href="https://github.com/xtne6f/EDCB/blob/work-plus-s/Document/Readme_EpgTimer.txt#L929-L1008" target="_blank" data-v-de631340>テンプレート構文の一覧</a> / <a class="link" href="https://github.com/xtne6f/EDCB/blob/work-plus-s/Document/Readme_Mod.txt#%E3%83%9E%E3%82%AF%E3%83%AD" target="_blank" data-v-de631340>xtne6f 版での追加差分</a></div></div>',2)),t(F,{disabled:s.reservation.is_recording_in_progress,modelValue:g.value,"onUpdate:modelValue":[a[3]||(a[3]=l=>g.value=l),w],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:"$ZtoH(Title)$.ts"},null,8,["disabled","modelValue"])]),e("div",bs,[a[20]||(a[20]=e("div",{class:"reservation-recording-settings__label"},"録画マージン (秒)",-1)),a[21]||(a[21]=e("div",{class:"reservation-recording-settings__description"}," 番組開始時刻の何秒前から録画を開始し、番組終了時刻の何秒後に録画を終了するかの設定です。最低でも5秒以上をおすすめします。(0秒だと番組の冒頭/末尾が欠けてしまいます。) ",-1)),e("div",ys,[t(Fe,{disabled:s.reservation.is_recording_in_progress,id:"use-default-margin",modelValue:V.value,"onUpdate:modelValue":[a[4]||(a[4]=l=>V.value=l),M],color:"primary",density:"compact","hide-details":""},null,8,["disabled","modelValue"]),a[19]||(a[19]=e("label",{class:"reservation-recording-settings__margin-default-text",for:"use-default-margin",style:{"user-select":"none"}}," デフォルト設定を使う ",-1))]),e("div",hs,[t(F,{disabled:s.reservation.is_recording_in_progress||V.value,modelValue:n.value.recording_start_margin,"onUpdate:modelValue":[a[5]||(a[5]=l=>n.value.recording_start_margin=l),w],modelModifiers:{number:!0},color:"primary",variant:"outlined",density:"compact",type:"number","hide-details":"",prefix:"番組開始",suffix:"秒前",style:{width:"160px"}},null,8,["disabled","modelValue"]),t(F,{disabled:s.reservation.is_recording_in_progress||V.value,modelValue:n.value.recording_end_margin,"onUpdate:modelValue":[a[6]||(a[6]=l=>n.value.recording_end_margin=l),w],modelModifiers:{number:!0},color:"primary",variant:"outlined",density:"compact",type:"number","hide-details":"",prefix:"番組終了",suffix:"秒後",style:{width:"166px"}},null,8,["disabled","modelValue"])])]),e("div",ws,[a[22]||(a[22]=e("div",{class:"reservation-recording-settings__label"},"字幕データ録画設定",-1)),a[23]||(a[23]=e("div",{class:"reservation-recording-settings__description"},[f(" 字幕データはほとんど録画容量を消費しません。"),e("br"),f(" [録画する] に設定しておくことを強くおすすめします。 ")],-1)),t(J,{disabled:s.reservation.is_recording_in_progress,modelValue:n.value.caption_recording_mode,"onUpdate:modelValue":[a[7]||(a[7]=l=>n.value.caption_recording_mode=l),w],items:P,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",Vs,[a[24]||(a[24]=e("div",{class:"reservation-recording-settings__label"},"データ放送録画設定",-1)),a[25]||(a[25]=e("div",{class:"reservation-recording-settings__description"},[f(" データ放送は30分で 500MB 以上録画容量を消費する上、KonomiTV は録画再生時のデータ放送表示に非対応です。"),e("br"),f(" [録画しない] に設定しておくことを強くおすすめします。 ")],-1)),t(J,{disabled:s.reservation.is_recording_in_progress,modelValue:n.value.data_broadcasting_recording_mode,"onUpdate:modelValue":[a[8]||(a[8]=l=>n.value.data_broadcasting_recording_mode=l),w],items:S,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",xs,[a[26]||(a[26]=e("div",{class:"reservation-recording-settings__label"},"録画後動作設定",-1)),a[27]||(a[27]=e("div",{class:"reservation-recording-settings__description"}," 通常は [何もしない] のままで大丈夫です。録画後に録画 PC をスリープさせておきたい方のみ設定してください。環境によっては復帰できず以降の録画に失敗することがあります。 ",-1)),t(J,{disabled:s.reservation.is_recording_in_progress,modelValue:n.value.post_recording_mode,"onUpdate:modelValue":[a[9]||(a[9]=l=>n.value.post_recording_mode=l),w],items:U,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",ks,[a[28]||(a[28]=e("div",{class:"reservation-recording-settings__label"},"録画後実行スクリプトのパス",-1)),e("div",Ps," 通常は空欄のままで大丈夫です。録画後に指定の "+y(A(m).is_linux_environment?".sh / .lua":".bat / .ps1 / .lua")+" スクリプトを実行させたい方のみ設定してください。 ",1),t(F,{disabled:s.reservation.is_recording_in_progress,modelValue:n.value.post_recording_bat_file_path,"onUpdate:modelValue":[a[10]||(a[10]=l=>n.value.post_recording_bat_file_path=l),w],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:A(m).is_linux_environment?"/var/local/edcb/transcode.sh":"C:\\DTV\\EDCB\\Transcode.bat"},null,8,["disabled","modelValue","placeholder"])])])}}}),$s=Y(Cs,[["__scopeId","data-v-de631340"]]),Ds={class:"reservation-detail-drawer__header"},Rs={class:"reservation-detail-drawer__tab-text"},Ss={class:"reservation-detail-drawer__content"},Us={key:0,class:"reservation-detail-drawer__info"},Bs={key:0,class:"status-banner status-banner--warning mb-4"},Es={key:1,class:"status-banner status-banner--error mb-4"},Is={key:2,class:"status-banner status-banner--info mb-4"},Ts={key:1,class:"reservation-detail-drawer__settings"},Ms={key:0,class:"reservation-detail-drawer__footer"},Ls={class:"reservation-detail-drawer__actions"},Fs={key:1,class:"reservation-detail-drawer__footer"},As={class:"reservation-detail-drawer__actions"},Os={key:0,class:"mb-4"},Hs=["innerHTML"],Ns={class:"text-body-2 text-text-darken-1"},js={key:1,class:"warning-banner warning-banner--recording"},zs={key:2,class:"warning-banner warning-banner--normal"},Js={key:3,class:"warning-banner warning-banner--keyword mt-3"},Gs={class:"warning-banner warning-banner--normal"},Ks=W({__name:"ReservationDetailDrawer",props:{reservation:{},program:{},channel:{},isPastProgram:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue","updated","deleted","added"],setup(s,{emit:C}){const d=s,k=C,m=p({get:()=>d.modelValue,set:i=>k("update:modelValue",i)}),n=Me(),$=p(()=>n.server_settings),v=D("info"),g=D(!1),R=D(!1),V=D(!1),P=D(null),S=D(!1),U=D(!1),E=p(()=>d.reservation!==null),w=p(()=>d.reservation!==null&&d.reservation.id===-1),M=p(()=>E.value&&!w.value),b=p(()=>{var i;return((i=d.reservation)==null?void 0:i.program)??d.program??null}),a=p(()=>$.value.general.backend==="EDCB"),B=p(()=>E.value&&!d.isPastProgram),l=p(()=>w.value&&!d.isPastProgram),ve=p(()=>{var i;return((i=d.reservation)==null?void 0:i.comment.includes("EPG自動予約"))??!1}),ge=p(()=>{var i;return((i=d.reservation)==null?void 0:i.is_recording_in_progress)??!1}),X=p(()=>{var i;return((i=d.reservation)==null?void 0:i.recording_availability)??"Full"}),me=p(()=>X.value==="Partial"),_e=p(()=>X.value==="Unavailable");ce(async()=>{await n.fetchServerSettingsOnce()}),Q(m,i=>{i?(v.value="info",g.value=!1,document.documentElement.classList.add("v-overlay-scroll-blocked")):document.documentElement.classList.remove("v-overlay-scroll-blocked")});const H=()=>{if(g.value){U.value=!0;return}m.value=!1},pe=()=>{U.value=!1,g.value=!1,m.value=!1},fe=i=>{P.value=i},be=async()=>{if(!g.value||R.value||!P.value||!d.reservation)return;const i=P.value.caption_recording_mode==="Default",r=P.value.data_broadcasting_recording_mode==="Default";if(i!==r){T.warning("字幕データ録画設定・データ放送録画設定を明示的に設定する際は、両方とも「デフォルト設定を使う」以外に設定してください。");return}R.value=!0;try{if(await G.updateReservation(d.reservation.id,P.value)){T.success("録画設定の変更を保存しました。");const x={...d.reservation,record_settings:P.value};k("updated",x),g.value=!1}}catch(c){console.error("Failed to save settings:",c),T.error("録画設定の保存に失敗しました。")}finally{R.value=!1}},ye=()=>{S.value=!0},he=async()=>{if(S.value=!1,!!d.reservation)try{await G.deleteReservation(d.reservation.id)&&(T.success("録画予約を削除しました。"),k("deleted",d.reservation.id),m.value=!1)}catch(i){console.error("Failed to delete reservation:",i)}},we=async()=>{if(!(V.value||!b.value||!d.reservation)){if(!a.value){T.error("録画予約機能は EDCB バックエンド選択時のみ利用できます。");return}V.value=!0;try{const i=P.value??d.reservation.record_settings,r=i.caption_recording_mode==="Default",c=i.data_broadcasting_recording_mode==="Default";if(r!==c){T.warning("字幕データ録画設定・データ放送録画設定を明示的に設定する際は、両方とも「デフォルト設定を使う」以外に設定してください。"),V.value=!1;return}await G.addReservation(b.value.id,i)&&(T.success("録画予約を追加しました。"),k("added"),m.value=!1)}catch(i){console.error("Failed to add reservation:",i),T.error("録画予約の追加に失敗しました。")}finally{V.value=!1}}};return(i,r)=>{const c=Z("Icon");return o(),u(q,null,[e("div",{class:L(["reservation-detail-drawer__scrim",{"reservation-detail-drawer__scrim--visible":m.value}]),onClick:H},null,2),e("div",{class:L(["reservation-detail-drawer",{"reservation-detail-drawer--visible":m.value}])},[e("div",Ds,[e("div",{class:L(["reservation-detail-drawer__tabs",{"reservation-detail-drawer__tabs--single":!B.value}])},[N((o(),u("div",{class:L(["reservation-detail-drawer__tab",{"reservation-detail-drawer__tab--active":v.value==="info"}]),onClick:r[0]||(r[0]=x=>v.value="info")},[t(c,{icon:"fluent:info-12-regular",width:"20px",height:"20px"}),e("span",Rs,"番組情報 "+y(B.value?"":"（終了済み）"),1)],2)),[[z]]),B.value?N((o(),u("div",{key:0,class:L(["reservation-detail-drawer__tab",{"reservation-detail-drawer__tab--active":v.value==="settings"}]),onClick:r[1]||(r[1]=x=>v.value="settings")},[t(c,{icon:"material-symbols:settings-video-camera-outline-rounded",width:"20px",height:"20px"}),r[7]||(r[7]=e("span",{class:"reservation-detail-drawer__tab-text"},"録画設定",-1))],2)),[[z]]):h("",!0)],2),N((o(),u("div",{class:"reservation-detail-drawer__close",onClick:H},[t(c,{icon:"fluent:dismiss-16-filled",width:"22px",height:"22px"})])),[[z]])]),e("div",Ss,[v.value==="info"?(o(),u("div",Us,[me.value?(o(),u("div",Bs,[t(c,{icon:"fluent:warning-16-filled",class:"status-banner__icon"}),r[8]||(r[8]=e("span",{class:"status-banner__text"},[f(" チューナー不足のため、この番組は一部のみ録画されます。"),e("br"),f(" 優先度を上げるか、重複する録画予約を調整してください。 ")],-1))])):h("",!0),_e.value?(o(),u("div",Es,[t(c,{icon:"fluent:error-circle-16-filled",class:"status-banner__icon"}),r[9]||(r[9]=e("span",{class:"status-banner__text"},[f(" チューナー不足のため、この番組は録画できません。"),e("br"),f(" 優先度を上げるか、重複する録画予約を削除してください。 ")],-1))])):h("",!0),!a.value&&!s.isPastProgram&&!M.value?(o(),u("div",Is,[t(c,{icon:"fluent:info-16-regular",class:"status-banner__icon"}),r[10]||(r[10]=e("span",{class:"status-banner__text"}," 録画予約機能は EDCB バックエンド選択時のみ利用できます。 ",-1))])):h("",!0),t(ds,{reservation:s.reservation,program:s.program,channel:s.channel},null,8,["reservation","program","channel"])])):h("",!0),v.value==="settings"&&s.reservation?(o(),u("div",Ts,[t($s,{reservation:s.reservation,"has-changes":g.value,onUpdateSettings:fe,onChangesDetected:r[2]||(r[2]=x=>g.value=x)},null,8,["reservation","has-changes"])])):h("",!0)]),s.isPastProgram?(o(),u("div",Fs,[e("div",As,[t(I,{class:"px-3",variant:"text",onClick:H},{default:_(()=>[t(c,{icon:"fluent:dismiss-16-regular",width:"20px",height:"20px"}),r[14]||(r[14]=e("span",{class:"ml-1"},"閉じる",-1))]),_:1})])])):(o(),u("div",Ms,[e("div",Ls,[M.value?(o(),j(I,{key:0,class:"px-3",variant:"text",onClick:ye},{default:_(()=>[t(c,{icon:"fluent:delete-16-regular",width:"20px",height:"20px"}),r[11]||(r[11]=e("span",{class:"ml-1"},"予約を削除",-1))]),_:1})):h("",!0),M.value&&v.value==="settings"?(o(),j(I,{key:1,class:"px-3",color:"secondary",variant:"flat",disabled:!g.value,loading:R.value,onClick:be},{default:_(()=>[t(c,{icon:"fluent:save-16-regular",width:"20px",height:"20px"}),r[12]||(r[12]=e("span",{class:"ml-1"},"変更を保存",-1))]),_:1},8,["disabled","loading"])):h("",!0),l.value?(o(),j(I,{key:2,class:"px-3",color:"secondary",variant:"flat",disabled:!a.value,loading:V.value,onClick:we},{default:_(()=>[t(c,{icon:"fluent:timer-16-regular",width:"20px",height:"20px"}),r[13]||(r[13]=e("span",{class:"ml-1"},"予約を追加",-1))]),_:1},8,["disabled","loading"])):h("",!0)])]))],2),t(ne,{modelValue:S.value,"onUpdate:modelValue":r[4]||(r[4]=x=>S.value=x),"max-width":"715"},{default:_(()=>[t(ie,null,{default:_(()=>[t(oe,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:_(()=>[...r[15]||(r[15]=[f(" 録画予約を削除しますか？ ",-1)])]),_:1}),t(le,{class:"pt-2 pb-0"},{default:_(()=>[s.reservation?(o(),u("div",Os,[e("div",{class:"text-h6 text-text mb-2",innerHTML:A(K).decorateProgramInfo(s.reservation.program,"title")},null,8,Hs),e("div",Ns,y(A(K).getProgramTime(s.reservation.program)),1)])):h("",!0),ge.value&&s.reservation?(o(),u("div",js,[t(c,{icon:"fluent:warning-16-filled",class:"warning-banner__icon"}),r[16]||(r[16]=e("span",{class:"warning-banner__text"},[f(" この番組は現在録画中です。"),e("br"),f(" 予約を削除すると、現在までの録画ファイルは残りますが、残りの期間の録画は中断されます。 ")],-1))])):s.reservation?(o(),u("div",zs,[t(c,{icon:"fluent:info-16-regular",class:"warning-banner__icon"}),r[17]||(r[17]=e("span",{class:"warning-banner__text"}," 録画予約を削除すると、番組開始時刻までに再度予約を追加しない限り、この番組は録画されません。 ",-1))])):h("",!0),ve.value&&s.reservation?(o(),u("div",Js,[t(c,{icon:"fluent:warning-16-filled",class:"warning-banner__icon"}),r[18]||(r[18]=e("span",{class:"warning-banner__text"},[f(" この予約はキーワード自動予約で追加されました。削除してもすぐに再追加される可能性があります。"),e("br"),f(" 録画が不要な場合は削除ではなく「無効」にすることをおすすめします。 ")],-1))])):h("",!0)]),_:1}),t(de,{class:"pt-4 px-6 pb-6"},{default:_(()=>[t(ue),t(I,{color:"text",variant:"text",onClick:r[3]||(r[3]=x=>S.value=!1)},{default:_(()=>[t(c,{icon:"fluent:dismiss-20-regular",width:"18px",height:"18px"}),r[19]||(r[19]=e("span",{class:"ml-1"},"キャンセル",-1))]),_:1}),t(I,{class:"px-3",color:"error",variant:"flat",onClick:he},{default:_(()=>[t(c,{icon:"fluent:delete-20-regular",width:"18px",height:"18px"}),r[20]||(r[20]=e("span",{class:"ml-1"},"予約を削除",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ne,{modelValue:U.value,"onUpdate:modelValue":r[6]||(r[6]=x=>U.value=x),"max-width":"500"},{default:_(()=>[t(ie,null,{default:_(()=>[t(oe,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:_(()=>[...r[21]||(r[21]=[f(" 変更を破棄しますか？ ",-1)])]),_:1}),t(le,{class:"pt-2 pb-0"},{default:_(()=>[e("div",Gs,[t(c,{icon:"fluent:info-16-regular",class:"warning-banner__icon"}),r[22]||(r[22]=e("span",{class:"warning-banner__text"},[f(" 録画設定の変更がまだ保存されていません。"),e("br"),f(" このまま閉じると、変更内容は破棄されます。 ")],-1))])]),_:1}),t(de,{class:"pt-4 px-6 pb-6"},{default:_(()=>[t(ue),t(I,{color:"text",variant:"text",onClick:r[5]||(r[5]=x=>U.value=!1)},{default:_(()=>[t(c,{icon:"fluent:arrow-left-20-regular",width:"18px",height:"18px"}),r[23]||(r[23]=e("span",{class:"ml-1"},"編集に戻る",-1))]),_:1}),t(I,{class:"px-3",color:"secondary",variant:"flat",onClick:pe},{default:_(()=>[t(c,{icon:"fluent:dismiss-20-regular",width:"18px",height:"18px"}),r[24]||(r[24]=e("span",{class:"ml-1"},"変更を破棄",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),ta=Y(Ks,[["__scopeId","data-v-e9bcb152"]]);export{ta as R};
