import{d as $,m as C,U as b,u as T,_ as U,k as V,h as r,a as i,b as e,w as S,r as _,c as u,e as h,l,t as v,o as d,R as w,M as m,V as g}from"./index-Bh-DvNC7.js";import{d as D}from"./vuedraggable.umd-D_hXZgRn.js";import{u as P}from"./ChannelsStore-DwwtLwac.js";import{V as I,a as M}from"./VCard-BO0AWuxT.js";import{V as Z}from"./ssrBoot-DP7JoWpu.js";import{V as A}from"./VDialog-Bkr8c2fG.js";import{a as H}from"./TimeTableSettings-CwB2LMBT.js";import{S as N}from"./Base-o0QmPR-9.js";import{d as c}from"./VTextField-p58jP1Do.js";import{V as p}from"./VSwitch-Dpj27hvA.js";import{c as y}from"./VSelect-De12x2M0.js";import{V as z}from"./VFileInput-DJGN4Wap.js";import"./VAvatar-BxVD3wW4.js";import"./VChip-BpIIriqF.js";import"./SPHeaderBar-CsKotuWh.js";const K=$({name:"PinnedChannelSettings",components:{draggable:D},props:{modelValue:{type:Boolean,required:!0}},emits:{"update:modelValue":s=>!0},data(){return{Utils:Object.freeze(b),pinned_channel_settings_modal:!1,pinned_channels:[]}},computed:{...C(P,T)},watch:{modelValue(){this.pinned_channel_settings_modal=this.modelValue},pinned_channel_settings_modal(){this.$emit("update:modelValue",this.pinned_channel_settings_modal)},pinned_channels(){this.settingsStore.settings.pinned_channel_ids=this.pinned_channels.map(s=>s.id)}},async created(){await this.channelsStore.update(),this.pinned_channels=this.channelsStore.channels_list_with_pinned.get("ピン留め")??[]}}),R={class:"px-5 pb-6"},E={key:0,class:"pinned-channels-settings__label"},F={key:1,class:"pinned-channels-settings__label"},G={class:"mt-1"},L={class:"pinned-channel"},J=["src"],Q={class:"pinned-channel__name"},W=["onClick"];function X(s,t,q,B,O,j){const a=_("Icon"),f=_("draggable");return d(),V(A,{"max-width":"550",transition:"slide-y-transition",modelValue:s.pinned_channel_settings_modal,"onUpdate:modelValue":t[2]||(t[2]=o=>s.pinned_channel_settings_modal=o)},{default:r(()=>[i(M,{class:"pinned-channels-settings"},{default:r(()=>[i(I,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:r(()=>[i(a,{icon:"iconamoon:sorting-left-bold",height:"26px"}),t[3]||(t[3]=e("span",{class:"ml-3"},"ピン留め中チャンネルの並び替え",-1)),i(Z),S((d(),u("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:t[0]||(t[0]=o=>s.pinned_channel_settings_modal=!1)},[i(a,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[w]])]),_:1}),e("div",R,[(s.channelsStore.channels_list_with_pinned.get("ピン留め")??[]).length>0?(d(),u("div",E,[...t[4]||(t[4]=[e("div",null,"各チャンネルのつまみをドラッグして並べ替えできます。",-1)])])):h("",!0),(s.channelsStore.channels_list_with_pinned.get("ピン留め")??[]).length===0?(d(),u("div",F,[t[7]||(t[7]=e("div",null,[e("b",null,"ピン留めされているチャンネルがありません。")],-1)),e("div",G,[t[5]||(t[5]=l("TV ホーム画面のチャンネルリストの ",-1)),i(a,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"18.5px"}),t[6]||(t[6]=l(" アイコンから、よくみるチャンネルをピン留めできます。",-1))])])):h("",!0),s.pinned_channels.length>0?(d(),V(f,{key:2,class:"pinned-channels",handle:".pinned-channel__sort-handle","item-key":"id",modelValue:s.pinned_channels,"onUpdate:modelValue":t[1]||(t[1]=o=>s.pinned_channels=o)},{item:r(({element:o})=>[e("div",L,[e("img",{class:"pinned-channel__icon",loading:"lazy",decoding:"async",src:`${s.Utils.api_base_url}/channels/${o.id}/logo`},null,8,J),e("span",Q,"Ch: "+v(o.channel_number)+" "+v(o.name),1),t[9]||(t[9]=e("button",{class:"pinned-channel__sort-handle"},[e("svg",{class:"iconify iconify--material-symbols",width:"20px",height:"20px",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M5 15q-.425 0-.713-.288T4 14q0-.425.288-.713T5 13h14q.425 0 .713.288T20 14q0 .425-.288.713T19 15H5Zm0-4q-.425 0-.713-.288T4 10q0-.425.288-.713T5 9h14q.425 0 .713.288T20 10q0 .425-.288.713T19 11H5Z"})])],-1)),S((d(),u("button",{class:"pinned-channel__delete-button",onClick:k=>s.pinned_channels=s.pinned_channels.filter(n=>n.id!==o.id)},[...t[8]||(t[8]=[e("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)])],8,W)),[[w]])])]),_:1},8,["modelValue"])):h("",!0)])]),_:1})]),_:1},8,["modelValue"])}const Y=U(K,[["render",X],["__scopeId","data-v-fc492e18"]]),x=$({name:"Settings-General",components:{PinnedChannelSettings:Y,TimeTableSettingsDialog:H,SettingsBase:N},data(){return{Utils:Object.freeze(b),is_form_dense:b.isSmartphoneHorizontal(),pinned_channel_settings_modal:!1,timetable_settings_modal:!1,panel_display_state:[{title:"前回の状態を復元する",value:"RestorePreviousState"},{title:"常に表示する",value:"AlwaysDisplay"},{title:"常に折りたたむ",value:"AlwaysFold"}],tv_panel_active_tab:[{title:"番組情報タブ",value:"Program"},{title:"チャンネルタブ",value:"Channel"},{title:"コメントタブ",value:"Comment"},{title:"Twitter タブ",value:"Twitter"}],video_panel_active_tab:[{title:"番組情報タブ",value:"RecordedProgram"},{title:"シリーズタブ",value:"Series"},{title:"コメントタブ",value:"Comment"},{title:"Twitter タブ",value:"Twitter"}],import_settings_file:null}},computed:{...C(T)},methods:{exportSettings(){const s=JSON.stringify(this.settingsStore.settings,null,4),t=new Blob([s],{type:"application/json"});b.downloadBlobData(t,"KonomiTV-Settings.json"),m.success("設定をエクスポートしました。")},async importSettings(){if(this.import_settings_file===null){m.error("インポートする設定データを選択してください！");return}await this.settingsStore.importClientSettings(this.import_settings_file)===!0?(m.success("設定をインポートしました。"),window.setTimeout(()=>this.$router.go(0),500)):m.error("設定データが不正なため、インポートできませんでした。")},async resetSettings(){await this.settingsStore.resetClientSettings(),m.success("設定をリセットしました。"),window.setTimeout(()=>this.$router.go(0),500)}}}),tt={class:"settings__heading"},et={class:"settings__content"},st={class:"settings__item settings__item--switch"},it={class:"settings__item settings__item--switch"},nt={class:"settings__item settings__item--switch"},lt={class:"settings__item-heading",for:"tv_channel_selection_requires_alt_key"},at={class:"settings__item-label",for:"tv_channel_selection_requires_alt_key"},ot={class:"settings__item settings__item--switch"},rt={class:"settings__item settings__item--switch"},dt={class:"settings__item"},_t={class:"settings__item"},mt={class:"settings__item"},gt={class:"settings__item"};function pt(s,t,q,B,O,j){const a=_("Icon"),f=_("PinnedChannelSettings"),o=_("TimeTableSettingsDialog"),k=_("SettingsBase");return d(),V(k,null,{default:r(()=>[e("h2",tt,[S((d(),u("a",{class:"settings__back-button",onClick:t[0]||(t[0]=n=>s.$router.back())},[i(a,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[w]]),i(a,{icon:"fa-solid:sliders-h",width:"19px",style:{margin:"0 4px"}}),t[17]||(t[17]=e("span",{class:"ml-3"},"全般",-1))]),e("div",et,[t[42]||(t[42]=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading"},"ピン留め中チャンネルの並び替え"),e("div",{class:"settings__item-label"},[l(" ピン留め中のチャンネルの表示順序を変更できます。よくみるチャンネルは先頭に配置しておくと便利です。"),e("br"),l(" ピン留め中のチャンネルの追加・削除は、別途 TV ホーム画面のチャンネルリストから行えます。"),e("br")])],-1)),i(g,{class:"settings__save-button mt-4",variant:"flat",onClick:t[1]||(t[1]=n=>s.pinned_channel_settings_modal=!s.pinned_channel_settings_modal)},{default:r(()=>[i(a,{icon:"iconamoon:sorting-left-bold",height:"19px"}),t[18]||(t[18]=e("span",{class:"ml-1"},"ピン留め中チャンネルの並び替え設定を開く",-1))]),_:1}),t[43]||(t[43]=e("div",{class:"settings__item mt-6"},[e("div",{class:"settings__item-heading"},"番組表の表示設定"),e("div",{class:"settings__item-label"},[l(" 番組表のチャンネル名の表示幅、時間軸の表示密度、ジャンル別のハイライト色などを設定できます。"),e("br"),l(" 番組表ページ上部の設定アイコンからも開くことができます。"),e("br")])],-1)),i(g,{class:"settings__save-button mt-4",variant:"flat",onClick:t[2]||(t[2]=n=>s.timetable_settings_modal=!s.timetable_settings_modal)},{default:r(()=>[i(a,{icon:"fluent:calendar-ltr-16-regular",height:"19px"}),t[19]||(t[19]=e("span",{class:"ml-1"},"番組表の表示設定を開く",-1))]),_:1}),i(c,{class:"mt-6"}),e("div",st,[t[20]||(t[20]=e("label",{class:"settings__item-heading",for:"show_player_background_image"},"プレイヤーの読み込み中に背景写真を表示する",-1)),t[21]||(t[21]=e("label",{class:"settings__item-label",for:"show_player_background_image"},[l(" プレイヤーの読み込み中にランダムで背景写真を表示できます。デフォルトはオンです。"),e("br"),l(" 背景写真を表示したくない場合は、この設定をオフにできます。"),e("br")],-1)),i(p,{class:"settings__item-switch",color:"primary",id:"show_player_background_image","hide-details":"",modelValue:s.settingsStore.settings.show_player_background_image,"onUpdate:modelValue":t[3]||(t[3]=n=>s.settingsStore.settings.show_player_background_image=n)},null,8,["modelValue"])]),e("div",it,[t[22]||(t[22]=e("label",{class:"settings__item-heading",for:"use_pure_black_player_background"},"プレイヤー表示領域の背景色を完全な黒にする",-1)),t[23]||(t[23]=e("label",{class:"settings__item-label",for:"use_pure_black_player_background"},[l(" 映像の上下 or 左右に表示される黒帯の色を、完全な黒に変更できます。デフォルトはオフです。"),e("br"),l(" 特に有機 EL ディスプレイを搭載したデバイスで、映像の周囲に灰色がかった光が漏れて気になるときは、この設定をオンにすると改善されるかもしれません。"),e("br")],-1)),i(p,{class:"settings__item-switch",color:"primary",id:"use_pure_black_player_background","hide-details":"",modelValue:s.settingsStore.settings.use_pure_black_player_background,"onUpdate:modelValue":t[4]||(t[4]=n=>s.settingsStore.settings.use_pure_black_player_background=n)},null,8,["modelValue"])]),e("div",nt,[e("label",lt,"チャンネル選局のキーボードショートカットを "+v(s.Utils.AltOrOption())+" + 数字キー/テンキーに変更する",1),e("label",at,[l(" オンにすると、数字キーまたはテンキーに対応するリモコン番号（1～12）のチャンネルに切り替えるとき、"+v(s.Utils.AltOrOption())+" キーを同時に押す必要があります。",1),t[24]||(t[24]=e("br",null,null,-1)),t[25]||(t[25]=l(" コメントやツイートを入力しようとして誤って数字キーを押してしまい、チャンネルが変わってしまう事態を避けたい方におすすめです。",-1)),t[26]||(t[26]=e("br",null,null,-1))]),i(p,{class:"settings__item-switch",color:"primary",id:"tv_channel_selection_requires_alt_key","hide-details":"",modelValue:s.settingsStore.settings.tv_channel_selection_requires_alt_key,"onUpdate:modelValue":t[5]||(t[5]=n=>s.settingsStore.settings.tv_channel_selection_requires_alt_key=n)},null,8,["modelValue"])]),e("div",ot,[t[27]||(t[27]=e("label",{class:"settings__item-heading",for:"use_28hour_clock"},"時刻を 28 時間表記で表示する",-1)),t[28]||(t[28]=e("label",{class:"settings__item-label",for:"use_28hour_clock"},[l(" 深夜番組でよく使われる 28 時間表記 (24 時 〜 27 時) で時刻を表示します。デフォルトはオフです。"),e("br"),l(" オンにすると、午前 0 時 〜 3 時が前日の 24 時 〜 27 時と表示され、深夜番組の放送時間がよりわかりやすくなります。"),e("br")],-1)),i(p,{class:"settings__item-switch",color:"primary",id:"use_28hour_clock","hide-details":"",modelValue:s.settingsStore.settings.use_28hour_clock,"onUpdate:modelValue":t[6]||(t[6]=n=>s.settingsStore.settings.use_28hour_clock=n)},null,8,["modelValue"])]),e("div",rt,[t[29]||(t[29]=e("label",{class:"settings__item-heading",for:"show_original_broadcast_time_during_playback"},"録画番組の再生中に元の放送時刻を表示する",-1)),t[30]||(t[30]=e("label",{class:"settings__item-label",for:"show_original_broadcast_time_during_playback"},[l(" オンにすると、録画番組の再生中に現在時刻ではなく、元の放送時刻を再生位置に合わせて表示します。デフォルトはオフです。"),e("br"),l(" 元の放送時刻が表示されているときは、タイムシフト再生中であることを示すアイコンが時刻の左側に表示されます。"),e("br")],-1)),i(p,{class:"settings__item-switch",color:"primary",id:"show_original_broadcast_time_during_playback","hide-details":"",modelValue:s.settingsStore.settings.show_original_broadcast_time_during_playback,"onUpdate:modelValue":t[7]||(t[7]=n=>s.settingsStore.settings.show_original_broadcast_time_during_playback=n)},null,8,["modelValue"])]),i(c,{class:"mt-6"}),e("div",dt,[t[31]||(t[31]=e("div",{class:"settings__item-heading"},"デフォルトのパネルの表示状態",-1)),t[32]||(t[32]=e("div",{class:"settings__item-label"},[l(" 視聴画面を開いたときに、右側のパネルをどう表示するかを設定します。"),e("br")],-1)),i(y,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:s.is_form_dense?"compact":"default",items:s.panel_display_state,modelValue:s.settingsStore.settings.panel_display_state,"onUpdate:modelValue":t[8]||(t[8]=n=>s.settingsStore.settings.panel_display_state=n)},null,8,["density","items","modelValue"])]),e("div",_t,[t[33]||(t[33]=e("div",{class:"settings__item-heading"},"テレビをみるときにデフォルトで表示されるパネルのタブ",-1)),t[34]||(t[34]=e("div",{class:"settings__item-label"},[l(" テレビの視聴画面を開いたときに、右側のパネルで最初に表示されるタブを設定します。"),e("br")],-1)),i(y,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:s.is_form_dense?"compact":"default",items:s.tv_panel_active_tab,modelValue:s.settingsStore.settings.tv_panel_active_tab,"onUpdate:modelValue":t[9]||(t[9]=n=>s.settingsStore.settings.tv_panel_active_tab=n)},null,8,["density","items","modelValue"])]),e("div",mt,[t[35]||(t[35]=e("div",{class:"settings__item-heading"},"ビデオをみるときにデフォルトで表示されるパネルのタブ",-1)),t[36]||(t[36]=e("div",{class:"settings__item-label"},[l(" ビデオの視聴画面を開いたときに、右側のパネルで最初に表示されるタブを設定します。"),e("br")],-1)),i(y,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:s.is_form_dense?"compact":"default",items:s.video_panel_active_tab,modelValue:s.settingsStore.settings.video_panel_active_tab,"onUpdate:modelValue":t[10]||(t[10]=n=>s.settingsStore.settings.video_panel_active_tab=n)},null,8,["density","items","modelValue"])]),i(c,{class:"mt-6"}),t[44]||(t[44]=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading"},"設定をエクスポート"),e("div",{class:"settings__item-label"},[l(" このデバイス (ブラウザ) に保存されている設定データを、エクスポート (ダウンロード) できます。"),e("br"),l(" ダウンロードした設定データ (KonomiTV-Settings.json) は、[設定をインポート] からインポートできます。異なるサーバーの KonomiTV を同じ設定で使いたいときなどに使ってください。"),e("br")])],-1)),i(g,{class:"settings__save-button mt-4",variant:"flat",onClick:t[11]||(t[11]=n=>s.exportSettings())},{default:r(()=>[i(a,{icon:"fa6-solid:download",class:"mr-3",height:"19px"}),t[37]||(t[37]=l("設定をエクスポート ",-1))]),_:1}),e("div",gt,[t[38]||(t[38]=e("div",{class:"settings__item-heading text-error-lighten-1"},"設定をインポート",-1)),t[39]||(t[39]=e("div",{class:"settings__item-label"},[l(" [設定をエクスポート] でダウンロードした設定データを、このデバイス (ブラウザ) にインポートできます。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定をインポートすると、現在のデバイス設定はすべて上書きされます。元に戻すことはできません。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定のデバイス間同期がオンのときは、同期が有効なすべてのデバイスに反映されます。"),l("十分ご注意ください。"),e("br")],-1)),i(z,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"設定データ (KonomiTV-Settings.json) を選択",density:s.is_form_dense?"compact":"default",accept:"application/json","prepend-icon":"","prepend-inner-icon":"mdi-paperclip",modelValue:s.import_settings_file,"onUpdate:modelValue":t[12]||(t[12]=n=>s.import_settings_file=n)},null,8,["density","modelValue"])]),i(g,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:t[13]||(t[13]=n=>s.importSettings())},{default:r(()=>[i(a,{icon:"fa6-solid:upload",class:"mr-3",height:"19px"}),t[40]||(t[40]=l("設定をインポート ",-1))]),_:1}),t[45]||(t[45]=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading text-error-lighten-1"},"設定を初期状態にリセット"),e("div",{class:"settings__item-label"},[l(" このデバイス (ブラウザ) に保存されている設定データを、初期状態のデフォルト値にリセットできます。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定をリセットすると、元に戻すことはできません。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定のデバイス間同期がオンのときは、同期が有効なすべてのデバイスに反映されます。"),l("十分ご注意ください。"),e("br")])],-1)),i(g,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:t[14]||(t[14]=n=>s.resetSettings())},{default:r(()=>[i(a,{icon:"material-symbols:device-reset-rounded",class:"mr-2",height:"23px"}),t[41]||(t[41]=l("設定をリセット ",-1))]),_:1})]),i(f,{modelValue:s.pinned_channel_settings_modal,"onUpdate:modelValue":t[15]||(t[15]=n=>s.pinned_channel_settings_modal=n)},null,8,["modelValue"]),i(o,{isOpen:s.timetable_settings_modal,"onUpdate:isOpen":t[16]||(t[16]=n=>s.timetable_settings_modal=n)},null,8,["isOpen"])]),_:1})}const qt=U(x,[["render",pt]]);export{qt as default};
