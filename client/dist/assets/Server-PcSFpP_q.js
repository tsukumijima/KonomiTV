import{d as te,q as E,s as R,y as ve,k as se,h as p,a as s,b as t,w as P,r as z,c as T,e as le,l as i,F,g as j,t as ie,B as S,V as $,c$ as G,M as U,U as H,o as x,R as D,_ as ce,a7 as B,a1 as ne,x as ge,ad as fe,n as N,a2 as pe,aK as _e,aL as ae}from"./index-C90hjLTU.js";import{V as Q}from"./VDialog-CA4CK2fk.js";import{a as J,V as X,b as be,c as Ve}from"./VCard-BjWulXRM.js";import{V as Y}from"./ssrBoot-OnzqbV2B.js";import{c as W}from"./VSelect-CWOpdxGi.js";import{F as oe}from"./index-DbBVnk_T.js";import{a as ye,V as re}from"./VTabs-eyi1NnAE.js";import{V as q}from"./VSwitch-DhhO6NGN.js";import{V as ke}from"./SPHeaderBar-Chf0UYUT.js";import{S as we}from"./Base-DHJTPWr-.js";import{c as L}from"./VTextField-DDySwIAQ.js";import{V as de}from"./VSlider-DQxJb1-U.js";import"./VChip-CD6qvBgt.js";import"./VAvatar-D6Bl7QrI.js";const xe={class:"px-5 pb-6"},Ce={key:0,class:"user-manage-settings__label"},Te={key:1,class:"user-accounts"},he=["src"],Se={class:"user-account__info"},Ue={class:"user-account__name"},Ee={class:"user-account__id"},$e=["disabled","onClick"],Me=te({__name:"AccountManageSettings",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(b,{emit:l}){const v=b,d=l,f=E(!1);R(()=>v.modelValue,u=>{f.value=u}),R(f,u=>{d("update:modelValue",u)});const n=ve(),m=E([]),y=E({}),_=E({});R(_,u=>{for(const[e,r]of Object.entries(u)){const c=m.value.find(a=>a.id===Number(e));if(c){const a=r==="管理者";c.is_admin!==a&&G.updateSpecifiedUser(c.name,a).then(o=>{o?(U.success(`ユーザー ${c.name} の権限を ${r} に変更しました。`),k()):_.value[c.id]=c.is_admin?"管理者":"一般"}).catch(()=>{_.value[c.id]=c.is_admin?"管理者":"一般"})}}},{deep:!0});function k(){G.fetchAllUsers().then(async u=>{var e;if(u!==null){m.value=u;for(const r of m.value)G.fetchSpecifiedUserIcon(r.name).then(c=>{y.value[r.id]=c??""}),_.value[r.id]=r.is_admin?"管理者":"一般"}else{const r=await n.fetchUser(!0);r!==null&&r.name===((e=n.user)==null?void 0:e.name)&&!r.is_admin&&(U.warning("ログイン中ユーザーの管理者権限が剥奪されました。3秒後にリロードします。"),await H.sleep(3),location.reload())}})}n.fetchUser().then(u=>{u!=null&&u.is_admin&&k()});const w=E(!1),C=E(null);function I(u){C.value=u,w.value=!0}function M(){C.value&&G.deleteSpecifiedUser(C.value).then(u=>{u&&(m.value=m.value.filter(e=>e.name!==C.value),U.success(`ユーザー ${C.value} を削除しました。`),k()),w.value=!1})}return(u,e)=>{const r=z("Icon");return x(),se(Q,{"max-width":"570",transition:"slide-y-transition",modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=c=>f.value=c)},{default:p(()=>[s(J,{class:"user-manage-settings"},{default:p(()=>[s(X,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:p(()=>[s(r,{icon:"fluent:person-board-20-filled",height:"26px"}),e[5]||(e[5]=t("span",{class:"ml-3"},"アカウントの管理",-1)),s(Y),P((x(),T("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:e[0]||(e[0]=c=>f.value=!1)},[s(r,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[D]])]),_:1}),t("div",xe,[e[8]||(e[8]=t("div",{class:"user-manage-settings__label"},[i(" 管理者ユーザーには、サーバー設定やアカウントの管理権限が与えられます。"),t("br"),i(" 変更内容はすぐに反映されます。"),t("br")],-1)),e[9]||(e[9]=t("div",{class:"user-manage-settings__label text-error-lighten-1"},[t("strong",null,"アカウントを削除すると、そのアカウントに紐づくすべてのユーザーデータが削除されます。元に戻すことはできません。")],-1)),m.value.length===0?(x(),T("div",Ce,[...e[6]||(e[6]=[t("div",null,[t("b",null,"まだ KonomiTV アカウントが一つも作成されていません。")],-1),t("div",{class:"mt-1"},"KonomiTV アカウントを作成すると、より便利な機能が使えます！ぜひログインしての利用をおすすめします。",-1)])])):le("",!0),m.value.length>0?(x(),T("div",Te,[(x(!0),T(F,null,j(m.value,c=>{var a;return x(),T("div",{key:c.id,class:"user-account"},[t("img",{class:"user-account__icon",src:y.value[c.id]},null,8,he),t("div",Se,[t("span",Ue,ie(c.name),1),t("span",Ee,"User ID: "+ie(c.id),1)]),s(W,{class:"user-account__role",color:"primary",density:"compact",variant:"outlined","hide-details":"",items:["一般","管理者"],modelValue:_.value[c.id],"onUpdate:modelValue":o=>_.value[c.id]=o},null,8,["modelValue","onUpdate:modelValue"]),P((x(),T("button",{class:"user-account__delete-button",disabled:c.name===((a=S(n).user)==null?void 0:a.name),onClick:o=>I(c.name)},[...e[7]||(e[7]=[t("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)])],8,$e)),[[D]])])}),128))])):le("",!0)])]),_:1}),s(Q,{"max-width":"385",modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=c=>w.value=c)},{default:p(()=>[s(J,null,{default:p(()=>[s(X,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:p(()=>[...e[10]||(e[10]=[i("本当にアカウントを削除しますか？",-1)])]),_:1}),s(be,{class:"pt-2 pb-0"},{default:p(()=>[...e[11]||(e[11]=[i(" アカウントに紐づくすべてのユーザーデータが削除されます。元に戻すことはできません。",-1),t("br",null,null,-1),i(" 本当にアカウントを削除しますか？ ",-1)])]),_:1}),s(Ve,{class:"pt-4 px-6 pb-6"},{default:p(()=>[s(Y),s($,{color:"text",variant:"text",onClick:e[1]||(e[1]=c=>w.value=!1)},{default:p(()=>[...e[12]||(e[12]=[i("キャンセル",-1)])]),_:1}),s($,{color:"error",variant:"flat",onClick:e[2]||(e[2]=c=>M())},{default:p(()=>[...e[13]||(e[13]=[i("削除",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),Be=ce(Me,[["__scopeId","data-v-b8565d8d"]]);async function Ie(b,l){const v=b.getReader();let d;for(;!(d=await v.read()).done;)l(d.value)}function Ae(b){let l,v,d,f=!1;return function(m){l===void 0?(l=m,v=0,d=-1):l=Le(l,m);const y=l.length;let _=0;for(;v<y;){f&&(l[v]===10&&(_=++v),f=!1);let k=-1;for(;v<y&&k===-1;++v)switch(l[v]){case 58:d===-1&&(d=v-_);break;case 13:f=!0;case 10:k=v;break}if(k===-1)break;b(l.subarray(_,k),d),_=v,d=-1}_===y?l=void 0:_!==0&&(l=l.subarray(_),v-=_)}}function Ke(b,l,v){let d=ue();const f=new TextDecoder;return function(m,y){if(m.length===0)v==null||v(d),d=ue();else if(y>0){const _=f.decode(m.subarray(0,y)),k=y+(m[y+1]===32?2:1),w=f.decode(m.subarray(k));switch(_){case"data":d.data=d.data?d.data+`
`+w:w;break;case"event":d.event=w;break;case"id":b(d.id=w);break;case"retry":const C=parseInt(w,10);isNaN(C)||l(d.retry=C);break}}}}function Le(b,l){const v=new Uint8Array(b.length+l.length);return v.set(b),v.set(l,b.length),v}function ue(){return{data:"",event:"",id:"",retry:void 0}}var Pe=function(b,l){var v={};for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&l.indexOf(d)<0&&(v[d]=b[d]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,d=Object.getOwnPropertySymbols(b);f<d.length;f++)l.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(b,d[f])&&(v[d[f]]=b[d[f]]);return v};const ee="text/event-stream",De=1e3,me="last-event-id";function He(b,l){var{signal:v,headers:d,onopen:f,onmessage:n,onclose:m,onerror:y,openWhenHidden:_,fetch:k}=l,w=Pe(l,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((C,I)=>{const M=Object.assign({},d);M.accept||(M.accept=ee);let u;function e(){u.abort(),document.hidden||h()}_||document.addEventListener("visibilitychange",e);let r=De,c=0;function a(){document.removeEventListener("visibilitychange",e),window.clearTimeout(c),u.abort()}v==null||v.addEventListener("abort",()=>{a(),C()});const o=k??window.fetch,g=f??Oe;async function h(){var V;u=new AbortController;try{const A=await o(b,Object.assign(Object.assign({},w),{headers:M,signal:u.signal}));await g(A),await Ie(A.body,Ae(Ke(K=>{K?M[me]=K:delete M[me]},K=>{r=K},n))),m==null||m(),a(),C()}catch(A){if(!u.signal.aborted)try{const K=(V=y==null?void 0:y(A))!==null&&V!==void 0?V:r;window.clearTimeout(c),c=window.setTimeout(h,K)}catch(K){a(),I(K)}}}h()})}function Oe(b){const l=b.headers.get("content-type");if(!(l!=null&&l.startsWith(ee)))throw new Error(`Expected content-type to be ${ee}, Actual: ${l}`)}class O{static streamLogs(l,v,d){const f=new AbortController,n=H.getAccessToken();return n===null?(U.error(`サーバーログの表示には管理者権限が必要です。
管理者アカウントでログインし直してください。`),null):(He(`${H.api_base_url}/maintenance/logs/${l}`,{method:"GET",signal:f.signal,headers:{Authorization:`Bearer ${n}`,"X-KonomiTV-Version":H.version},openWhenHidden:!0,onmessage:m=>{m.event==="initial_log_update"?v(JSON.parse(m.data)):m.event==="log_update"&&d(JSON.parse(m.data))},onerror:m=>{if(console.error("Log stream error:",m),m instanceof Response&&(m.status===401||m.status===403)){U.error(`サーバーログの表示には管理者権限が必要です。
管理者アカウントでログインし直してください。`),f.abort();return}}}),f)}static async updateDatabase(){const l=await B.post("/maintenance/update-database");if(l.type==="error")switch(l.data.detail){default:B.showGenericError(l,"データベースを更新できませんでした。");break}}static async runBatchScan(){const l=await B.post("/maintenance/run-batch-scan",void 0,{timeout:864e5});if(l.type==="error"){switch(l.data.detail){case"Batch scan of recording folders is already running":B.showGenericError(l,"録画フォルダの一括スキャンは既に実行中です。");break;default:B.showGenericError(l,"録画フォルダの一括スキャンを開始できませんでした。");break}return!1}return!0}static async startBackgroundAnalysis(){const l=await B.post("/maintenance/run-background-analysis",void 0,{timeout:864e5});if(l.type==="error"){switch(l.data.detail){case"Background analysis task is already running":B.showGenericError(l,"バックグラウンド解析タスクは既に実行中です。");break;default:B.showGenericError(l,"バックグラウンド解析タスクを開始できませんでした。");break}return!1}return!0}static async restartServer(){const l=await B.post("/maintenance/restart");if(l.type==="error"){switch(l.data.detail){default:B.showGenericError(l,"サーバーを再起動できませんでした。");break}return!1}return!0}static async shutdownServer(){const l=await B.post("/maintenance/shutdown");if(l.type==="error"){switch(l.data.detail){default:B.showGenericError(l,"サーバーをシャットダウンできませんでした。");break}return!1}return!0}}const Re={class:"px-5 pb-6"},Ne={class:"server-log-dialog__label-container"},Ge={class:"server-log-dialog__auto-scroll-control"},Ze={class:"server-log-dialog__console-container"},Fe=["innerHTML"],je=["innerHTML"],Z=1e4,We=te({__name:"ServerLogDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(b,{emit:l}){const v=b,d=l,f=E(!1);R(()=>v.modelValue,o=>{f.value=o,o?u():c()}),R(f,o=>{d("update:modelValue",o)});const n=E([]),m=E([]),y=ne("server_scroller"),_=ne("access_scroller"),k=E("server"),w=E(!0);let C=null,I=null;function M(o){const g=/(DEBUG|INFO|WARNING|ERROR|CRITICAL):/,h=o.match(g);if(h){const V=h[1];let A="";switch(V){case"DEBUG":A="#7cbfcb";break;case"INFO":A="#aeca91";break;case"WARNING":A="#e5cb95";break;case"ERROR":A="#da8789";break}return o.replace(g,`<span style="color: ${A};">${V}</span>:`)}return o}function u(){e("server"),e("access")}function e(o){o==="server"&&C!==null?r("server"):o==="access"&&I!==null&&r("access");const g=O.streamLogs(o,h=>{const V=o==="server"?n:m;V.value=h,V.value.length>Z&&(V.value=V.value.slice(-Z)),w.value&&a(o)},h=>{const V=o==="server"?n:m;V.value.push(h),V.value.length>Z&&(V.value=V.value.slice(-Z)),w.value&&a(o)});if(g===null){const h=`サーバーログの表示には管理者権限が必要です。
管理者アカウントでログインし直してください。`;o==="server"?n.value=[h]:m.value=[h];return}o==="server"?C=g:I=g}function r(o){o==="server"&&C!==null?(C.abort(),C=null):o==="access"&&I!==null&&(I.abort(),I=null)}function c(){r("server"),r("access")}function a(o){pe(()=>{o==="server"&&y.value?y.value.scrollToIndex(n.value.length-1,{align:"end"}):o==="access"&&_.value&&_.value.scrollToIndex(m.value.length-1,{align:"end"})})}return ge(()=>{f.value&&u()}),fe(()=>{c()}),(o,g)=>{const h=z("Icon");return x(),se(Q,{"max-width":"900",transition:"slide-y-transition",modelValue:f.value,"onUpdate:modelValue":g[3]||(g[3]=V=>f.value=V)},{default:p(()=>[s(J,{class:"server-log-dialog"},{default:p(()=>[s(X,{class:"px-5 pt-6 pb-0 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:p(()=>[s(h,{icon:"fluent:document-text-16-regular",height:"26px"}),g[4]||(g[4]=t("span",{class:"ml-3"},"サーバーログ",-1)),s(Y),P((x(),T("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:g[0]||(g[0]=V=>f.value=!1)},[s(h,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[D]])]),_:1}),s(ye,{class:"server-log-dialog__tabs",color:"primary","bg-color":"transparent","align-tabs":"center",modelValue:k.value,"onUpdate:modelValue":g[1]||(g[1]=V=>k.value=V)},{default:p(()=>[s(re,{style:{"text-transform":"none !important"},value:"server"},{default:p(()=>[...g[5]||(g[5]=[i("サーバーログ",-1)])]),_:1}),s(re,{style:{"text-transform":"none !important"},value:"access"},{default:p(()=>[...g[6]||(g[6]=[i("アクセスログ",-1)])]),_:1})]),_:1},8,["modelValue"]),t("div",Re,[t("div",Ne,[g[8]||(g[8]=t("div",{class:"server-log-dialog__label"}," リアルタイムでログを表示しています。最新のログが下部に表示されます。 ",-1)),t("div",Ge,[g[7]||(g[7]=t("label",{for:"auto_scroll_enabled",class:"server-log-dialog__auto-scroll-label"},"自動スクロール",-1)),s(q,{id:"auto_scroll_enabled",modelValue:w.value,"onUpdate:modelValue":g[2]||(g[2]=V=>w.value=V),class:"server-log-dialog__auto-scroll-switch",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])])]),t("div",Ze,[s(S(oe),{ref_key:"server_scroller",ref:y,class:N(["server-log-dialog__console",{hidden:k.value!=="server"}]),data:n.value},{default:p(({item:V})=>[t("div",{class:"server-log-dialog__line",innerHTML:M(V)},null,8,Fe)]),_:1},8,["class","data"]),s(S(oe),{ref_key:"access_scroller",ref:_,class:N(["server-log-dialog__console",{hidden:k.value!=="access"}]),data:m.value},{default:p(({item:V})=>[t("div",{class:"server-log-dialog__line",innerHTML:M(V)},null,8,je)]),_:1},8,["class","data"])])])]),_:1})]),_:1},8,["modelValue"])}}}),qe=ce(We,[["__scopeId","data-v-c122b597"]]),ze={class:"settings__heading"},Qe={class:"settings__content-heading"},Je={class:"settings__item"},Xe={class:"settings__item"},Ye={class:"settings__item"},et={class:"settings__item"},tt={class:"settings__item"},st={class:"settings__item settings__item--switch"},lt={class:"settings__item settings__item--switch"},it={class:"settings__content-heading mt-6"},nt={class:"settings__item"},at={class:"settings__item"},ot={class:"settings__content-heading mt-6"},rt={class:"settings__item settings__item--switch"},dt={class:"settings__item"},ut={class:"settings__item"},mt={class:"settings__content-heading mt-6"},vt={class:"settings__item"},ct={class:"d-flex align-center mt-3"},gt=["onClick"],ft={class:"settings__item"},pt={class:"d-flex align-center mt-3"},_t=["onClick"],bt={class:"settings__content-heading mt-6"},Vt={class:"settings__item"},yt={class:"settings__item-label"},kt={class:"d-flex align-center mt-3"},wt=["onClick"],xt={class:"settings__content-heading mt-8"},Ct={class:"settings__item"},Tt={class:"settings__item-label mt-1"},ht={class:"settings__content"},St={class:"settings__content-heading mt-8"},Ut={class:"settings__content"},Gt=te({__name:"Server",setup(b){const l=H.isSmartphoneHorizontal(),v=[{title:"未設定",value:null},{title:"北海道（札幌）",value:"北海道（札幌）"},{title:"北海道（函館）",value:"北海道（函館）"},{title:"北海道（旭川）",value:"北海道（旭川）"},{title:"北海道（帯広）",value:"北海道（帯広）"},{title:"北海道（釧路）",value:"北海道（釧路）"},{title:"北海道（北見）",value:"北海道（北見）"},{title:"北海道（室蘭）",value:"北海道（室蘭）"},{title:"青森県",value:"青森県"},{title:"岩手県",value:"岩手県"},{title:"宮城県",value:"宮城県"},{title:"秋田県",value:"秋田県"},{title:"山形県",value:"山形県"},{title:"福島県",value:"福島県"},{title:"茨城県",value:"茨城県"},{title:"栃木県",value:"栃木県"},{title:"群馬県",value:"群馬県"},{title:"埼玉県",value:"埼玉県"},{title:"千葉県",value:"千葉県"},{title:"東京都",value:"東京都"},{title:"神奈川県",value:"神奈川県"},{title:"新潟県",value:"新潟県"},{title:"富山県",value:"富山県"},{title:"石川県",value:"石川県"},{title:"福井県",value:"福井県"},{title:"山梨県",value:"山梨県"},{title:"長野県",value:"長野県"},{title:"岐阜県",value:"岐阜県"},{title:"静岡県",value:"静岡県"},{title:"愛知県",value:"愛知県"},{title:"三重県",value:"三重県"},{title:"滋賀県",value:"滋賀県"},{title:"京都府",value:"京都府"},{title:"大阪府",value:"大阪府"},{title:"兵庫県",value:"兵庫県"},{title:"奈良県",value:"奈良県"},{title:"和歌山県",value:"和歌山県"},{title:"鳥取県",value:"鳥取県"},{title:"島根県",value:"島根県"},{title:"岡山県",value:"岡山県"},{title:"広島県",value:"広島県"},{title:"山口県",value:"山口県"},{title:"徳島県",value:"徳島県"},{title:"香川県",value:"香川県"},{title:"愛媛県",value:"愛媛県"},{title:"高知県",value:"高知県"},{title:"福岡県",value:"福岡県"},{title:"佐賀県",value:"佐賀県"},{title:"長崎県",value:"長崎県"},{title:"熊本県",value:"熊本県"},{title:"大分県",value:"大分県"},{title:"宮崎県",value:"宮崎県"},{title:"鹿児島県",value:"鹿児島県"},{title:"沖縄県",value:"沖縄県"}],d=E(!0);ve().fetchUser().then(u=>{u&&u.is_admin&&(d.value=!1)});const n=E(structuredClone(_e));ae.fetchServerSettings().then(u=>{u&&(n.value=u)});async function m(){n.value.server.custom_https_certificate===""&&(n.value.server.custom_https_certificate=null),n.value.server.custom_https_private_key===""&&(n.value.server.custom_https_private_key=null),await ae.updateServerSettings(n.value)===!0&&U.success(`サーバー設定を更新しました。
変更を反映するためには、KonomiTV サーバーを再起動してください。`)}const y=E(!1),_=E(!1);async function k(){U.show("データベースを更新しています..."),await O.updateDatabase(),U.success("データベースを更新しました。")}async function w(){U.info(`録画フォルダの一括スキャンを開始しています...
大量の録画ファイルが保存されている環境では、処理完了まで数時間〜数日以上かかることがあります。`),await O.runBatchScan()===!0&&U.success(`録画フォルダの一括スキャンが完了しました。
すべての録画ファイルがデータベースに同期されているはずです。`)}async function C(){U.info(`バックグラウンド解析タスクを開始しています...
大量の録画ファイルが保存されている環境では、処理完了まで数時間〜数日以上かかることがあります。`),await O.startBackgroundAnalysis()===!0&&U.success(`バックグラウンド解析タスクの実行が完了しました。
すべての録画番組のメタデータ解析/サムネイル生成が完了しているはずです。`)}async function I(){if(await O.restartServer()===!0){for(U.show("KonomiTV サーバーを再起動しています..."),await H.sleep(1);await ke.fetchServerVersion(!0)===null;)await H.sleep(1);U.success("KonomiTV サーバーを再起動しました。")}}async function M(){await O.shutdownServer()===!0&&U.success("KonomiTV サーバーをシャットダウンしました。")}return(u,e)=>{const r=z("Icon"),c=z("router-link");return x(),se(we,null,{default:p(()=>[t("h2",ze,[P((x(),T("a",{class:"settings__back-button",onClick:e[0]||(e[0]=a=>u.$router.back())},[s(r,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[D]]),s(r,{icon:"fluent:server-surface-16-filled",width:"22px"}),e[27]||(e[27]=t("span",{class:"ml-2"},"サーバー設定",-1))]),e[103]||(e[103]=t("div",{class:"settings__description"},[i(" サーバー設定を変更するには、管理者アカウントでログインしている必要があります。"),t("br")],-1)),e[104]||(e[104]=t("div",{class:"settings__description mt-1"},[i(" [サーバー設定を更新] ボタンを押さずにこのページから離れると、変更内容は破棄されます。"),t("br"),i(" 変更を反映するには KonomiTV サーバーの再起動が必要です。"),t("br")],-1)),t("div",{class:N(["settings__content",{"settings__content--disabled":d.value}])},[t("div",Qe,[s(r,{icon:"fa-solid:sliders-h",width:"22px",style:{padding:"0 3px"}}),e[28]||(e[28]=t("span",{class:"ml-2"},"全般",-1))]),t("div",Je,[e[29]||(e[29]=t("div",{class:"settings__item-heading"},"利用するバックエンド",-1)),e[30]||(e[30]=t("div",{class:"settings__item-label"},[i(" EDCB・Mirakurun のいずれかを選択してください。"),t("br"),i(" バックエンドに Mirakurun が選択されているときは、録画予約機能は利用できません。"),t("br")],-1)),s(W,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:S(l)?"compact":"default",items:["EDCB","Mirakurun"],modelValue:n.value.general.backend,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.general.backend=a)},null,8,["density","modelValue"])]),t("div",Xe,[e[31]||(e[31]=t("div",{class:"settings__item-heading"},"EDCB (EpgTimerNW) の TCP API の URL",-1)),e[32]||(e[32]=t("div",{class:"settings__item-label"},[i(" バックエンドに EDCB が選択されているときに利用されます。"),t("br"),i(" tcp://edcb-namedpipe/ と指定すると、TCP API の代わりに名前付きパイプを使って通信します (ローカルのみ)。"),t("br")],-1)),e[33]||(e[33]=t("div",{class:"settings__item-label mt-1"},[i(" 一部 Windows 環境では localhost の名前解決が遅いため、ストリーミング開始までの待機時間が長くなる場合があります。 EDCB と同じ PC に KonomiTV をインストールしている場合、localhost ではなく 127.0.0.1 の利用を推奨します。"),t("br")],-1)),s(L,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:S(l)?"compact":"default",modelValue:n.value.general.edcb_url,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.general.edcb_url=a)},null,8,["density","modelValue"])]),t("div",Ye,[e[34]||(e[34]=t("div",{class:"settings__item-heading"},"Mirakurun / mirakc の HTTP API の URL",-1)),e[35]||(e[35]=t("div",{class:"settings__item-label"},[i(" バックエンドに Mirakurun が選択されているときに利用されます。"),t("br")],-1)),e[36]||(e[36]=t("div",{class:"settings__item-label mt-1"},[i(" 一部 Windows 環境では localhost の名前解決が遅いため、ストリーミング開始までの待機時間が長くなる場合があります。 Mirakurun / mirakc と同じ PC に KonomiTV をインストールしている場合、localhost ではなく 127.0.0.1 の利用を推奨します。"),t("br")],-1)),s(L,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:S(l)?"compact":"default",modelValue:n.value.general.mirakurun_url,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.general.mirakurun_url=a)},null,8,["density","modelValue"])]),t("div",et,[e[37]||(e[37]=t("div",{class:"settings__item-heading"},"利用するエンコーダー",-1)),e[38]||(e[38]=t("div",{class:"settings__item-label"},[i(" FFmpeg はソフトウェアエンコーダーです。"),t("br"),i(" すべての PC で利用できますが、CPU に多大な負荷がかかり、パフォーマンスが悪いです。"),t("br")],-1)),e[39]||(e[39]=t("div",{class:"settings__item-label mt-1"},[i(" QSVEncC・NVEncC・VCEEncC・rkmppenc はハードウェアエンコーダーです。"),t("br"),i(" CPU 負荷が低く、パフォーマンスがとても高いです（おすすめ）。"),t("br")],-1)),s(W,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:S(l)?"compact":"default",items:[{title:"FFmpeg : ソフトウェアエンコーダー",value:"FFmpeg"},{title:"QSVEncC : Intel Graphics 搭載 CPU / Intel Arc GPU で利用可能",value:"QSVEncC"},{title:"NVEncC : NVIDIA GPU で利用可能",value:"NVEncC"},{title:"VCEEncC : AMD GPU で利用可能",value:"VCEEncC"},{title:"rkmppenc : Rockchip RK3588 系 SoC 搭載 SBC で利用可能",value:"rkmppenc"}],modelValue:n.value.general.encoder,"onUpdate:modelValue":e[4]||(e[4]=a=>n.value.general.encoder=a)},null,8,["density","modelValue"])]),t("div",tt,[e[40]||(e[40]=t("div",{class:"settings__item-heading"},"番組情報の更新間隔 (分)",-1)),e[41]||(e[41]=t("div",{class:"settings__item-label"},[i(" 番組情報を EDCB または Mirakurun / mirakc から取得する間隔を設定します。デフォルトは 5 (分) です。"),t("br")],-1)),s(de,{class:"settings__item-form",color:"primary","show-ticks":"always","thumb-label":"","hide-details":"",min:.5,max:60,step:.5,density:S(l)?"compact":"default",modelValue:n.value.general.program_update_interval,"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.general.program_update_interval=a)},null,8,["density","modelValue"])]),t("div",st,[e[42]||(e[42]=t("label",{class:"settings__item-heading",for:"debug"},"デバッグモードを有効にする",-1)),e[43]||(e[43]=t("label",{class:"settings__item-label",for:"debug"},[i(" 有効にすると、デバッグログも出力されるようになります。"),t("br")],-1)),s(q,{class:"settings__item-switch",color:"primary",id:"debug","hide-details":"",modelValue:n.value.general.debug,"onUpdate:modelValue":e[6]||(e[6]=a=>n.value.general.debug=a)},null,8,["modelValue"])]),t("div",lt,[e[44]||(e[44]=t("label",{class:"settings__item-heading",for:"debug_encoder"},"エンコーダーのログを有効にする",-1)),e[45]||(e[45]=t("label",{class:"settings__item-label",for:"debug_encoder"},[i(" 有効にすると、ライブ視聴時のエンコーダーのログが KonomiTV/server/logs/ 以下に保存されます。"),t("br"),i(" さらにデバッグモード有効時は、サーバーログにエンコーダーのログがリアルタイム出力されます。"),t("br")],-1)),s(q,{class:"settings__item-switch",color:"primary",id:"debug_encoder","hide-details":"",modelValue:n.value.general.debug_encoder,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.general.debug_encoder=a)},null,8,["modelValue"])]),t("div",it,[s(r,{icon:"fluent:server-surface-16-filled",width:"22px"}),e[46]||(e[46]=t("span",{class:"ml-2"},"サーバー",-1))]),t("div",nt,[e[47]||(e[47]=t("div",{class:"settings__item-heading"},"KonomiTV サーバーのリッスンポート",-1)),e[48]||(e[48]=t("div",{class:"settings__item-label"},[i(" デフォルトのリッスンポートは 7000 です。"),t("br")],-1)),s(L,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:S(l)?"compact":"default",modelValue:n.value.server.port,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.server.port=a)},null,8,["density","modelValue"])]),t("div",at,[e[49]||(e[49]=t("div",{class:"settings__item-heading"},"HTTPS リバースプロキシのカスタム HTTPS 証明書/秘密鍵ファイルへの絶対パス",-1)),e[50]||(e[50]=t("div",{class:"settings__item-label"},[i(" 設定すると、カスタム HTTPS 証明書を使って HTTPS リバースプロキシを開始します。"),t("br"),i(" カスタム HTTPS 証明書を有効化すると、https://192-168-x-xx.local.konomi.tv:7000/ の URL では KonomiTV にアクセスできなくなります。"),t("br"),i(" 基本空欄のままで問題ありません。HTTPS 証明書について詳細に理解している方のみ設定してください。"),t("br")],-1)),s(L,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"例: C:\\path\\to\\cert.pem",density:S(l)?"compact":"default",modelValue:n.value.server.custom_https_certificate,"onUpdate:modelValue":e[9]||(e[9]=a=>n.value.server.custom_https_certificate=a)},null,8,["density","modelValue"]),s(L,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"例: C:\\path\\to\\key.pem",density:S(l)?"compact":"default",modelValue:n.value.server.custom_https_private_key,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.server.custom_https_private_key=a)},null,8,["density","modelValue"])]),t("div",ot,[s(r,{icon:"fluent:tv-20-filled",width:"22px"}),e[51]||(e[51]=t("span",{class:"ml-2"},"テレビのライブストリーミング",-1))]),t("div",rt,[e[52]||(e[52]=t("label",{class:"settings__item-heading",for:"always_receive_tv_from_mirakurun"},"常に Mirakurun / mirakc から放送波を受信する",-1)),e[53]||(e[53]=t("label",{class:"settings__item-label",for:"always_receive_tv_from_mirakurun"},[i(" 利用するバックエンドが EDCB のとき、常に Mirakurun / mirakc から放送波を受信するかを設定します。 バックエンドに Mirakurun が選択されているときは効果がありません。"),t("br")],-1)),e[54]||(e[54]=t("label",{class:"settings__item-label mt-1",for:"always_receive_tv_from_mirakurun"},[i(" KonomiTV から EDCB と Mirakurun / mirakc 両方にアクセスできる必要があります。"),t("br"),i(" EDCB はチューナー起動やチャンネル切り替えに時間がかかるため、Mirakurun / mirakc が利用できる環境であれば、この設定を有効にするとより快適に使えます。"),t("br")],-1)),s(q,{class:"settings__item-switch",color:"primary",id:"always_receive_tv_from_mirakurun","hide-details":"",modelValue:n.value.general.always_receive_tv_from_mirakurun,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.general.always_receive_tv_from_mirakurun=a)},null,8,["modelValue"])]),t("div",dt,[e[55]||(e[55]=t("div",{class:"settings__item-heading"},"チャンネル表示・選局で優先するエリア (地デジ)",-1)),e[56]||(e[56]=t("div",{class:"settings__item-label"},[i(" 複数の地域の放送波が受信できる環境で、リモコン番号が同じチャンネルが複数ある場合に、どのエリアのチャンネルを優先して表示・選局するかを設定します。デフォルトは未設定です。"),t("br")],-1)),e[57]||(e[57]=t("div",{class:"settings__item-label mt-1"},[i(" 優先エリアのチャンネルは枝番なし (例: Ch:011) で、それ以外のチャンネルは枝番付き (例: Ch:011-1) で表示されます。キーボードショートカットやリモコンボタンでの選局時も、優先エリアのチャンネルが選局されます。"),t("br")],-1)),e[58]||(e[58]=t("div",{class:"settings__item-label mt-1"},[i(" 設定しない場合は、(ネットワークID)-(サービスID) の数値順で優先順位が決まります。"),t("br")],-1)),s(W,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:S(l)?"compact":"default",items:v,modelValue:n.value.tv.preferred_terrestrial_region,"onUpdate:modelValue":e[12]||(e[12]=a=>n.value.tv.preferred_terrestrial_region=a)},null,8,["density","modelValue"])]),t("div",ut,[e[59]||(e[59]=t("div",{class:"settings__item-heading"},"誰も見ていないチャンネルのエンコードタスクを維持する秒数",-1)),e[60]||(e[60]=t("div",{class:"settings__item-label"},[i(" 10 秒に設定したなら、10 秒間誰も見ていない状態が継続したらエンコードタスク（エンコーダー）を終了します。"),t("br")],-1)),e[61]||(e[61]=t("div",{class:"settings__item-label mt-1"},[i(" 0 秒に設定すると、ネット回線が瞬断したりリロードしただけでチューナーとエンコーダーの再起動が必要になり、再生復帰までに時間がかかります。余裕をもたせておく事をおすすめします。"),t("br")],-1)),s(de,{class:"settings__item-form",color:"primary","show-ticks":"always","thumb-label":"","hide-details":"",min:0,max:60,step:1,density:S(l)?"compact":"default",modelValue:n.value.tv.max_alive_time,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.tv.max_alive_time=a)},null,8,["density","modelValue"])]),t("div",mt,[s(r,{icon:"fluent:movies-and-tv-20-filled",width:"22px"}),e[62]||(e[62]=t("span",{class:"ml-2"},"ビデオのオンデマンドストリーミング",-1))]),t("div",vt,[e[65]||(e[65]=t("div",{class:"settings__item-heading"},"録画済み番組の保存先フォルダの絶対パス",-1)),e[66]||(e[66]=t("div",{class:"settings__item-label",style:{"padding-bottom":"2px"}},[i(" 指定フォルダ以下に保存されている MPEG-TS 形式の録画ファイルを KonomiTV サーバーが自動的に見つけ出し、メタデータの解析とサムネイルの作成を行います。"),t("br"),i(" 解析が完了すると、録画番組一覧から再生できるようになります。"),t("br")],-1)),e[67]||(e[67]=t("div",{class:"settings__item-label mt-1",style:{"padding-bottom":"2px"}},[i(" 複数の保存先フォルダを指定できます。フォルダやファイルのシンボリックリンクにも対応しています。"),t("br"),i(" シンボリックリンクは実体のパスに変換されるため、同じ録画ファイルが重複スキャンされることはありません。"),t("br")],-1)),(x(!0),T(F,null,j(n.value.video.recorded_folders,(a,o)=>(x(),T("div",{key:"recorded-folder-"+o},[t("div",ct,[s(L,{class:"settings__item-form mt-0",color:"primary",variant:"outlined","hide-details":"",placeholder:"例: E:\\TV-Record",density:S(l)?"compact":"default",modelValue:n.value.video.recorded_folders[o],"onUpdate:modelValue":g=>n.value.video.recorded_folders[o]=g},null,8,["density","modelValue","onUpdate:modelValue"]),P((x(),T("button",{class:"settings__item-delete-button",onClick:g=>n.value.video.recorded_folders.splice(o,1)},[...e[63]||(e[63]=[t("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)])],8,gt)),[[D]])])]))),128)),s($,{class:"mt-3",color:"background-lighten-2",variant:"flat",height:"40px",onClick:e[14]||(e[14]=a=>n.value.video.recorded_folders.push(""))},{default:p(()=>[s(r,{icon:"fluent:add-12-filled",height:"17px"}),e[64]||(e[64]=t("span",{class:"ml-1"},"保存先フォルダを追加",-1))]),_:1})]),t("div",ft,[e[70]||(e[70]=t("div",{class:"settings__item-heading"},"録画フォルダのスキャン対象から除外するフォルダの絶対パス",-1)),e[71]||(e[71]=t("div",{class:"settings__item-label",style:{"padding-bottom":"2px"}},[i(" 録画フォルダ以下にある一時フォルダなど、スキャン対象から除外したいサブフォルダを指定できます。"),t("br")],-1)),e[72]||(e[72]=t("div",{class:"settings__item-label mt-1",style:{"padding-bottom":"2px"}},[i(" シンボリックリンク解決前のパスと、解決後の実体パスの両方で前方一致判定を行います。"),t("br"),i(" 例えば、"),t("code",null,"E:\\TV-Record\\Temp"),i(" を指定すると、そのサブフォルダ以下の録画ファイルはスキャン対象から除外されます。"),t("br")],-1)),(x(!0),T(F,null,j(n.value.video.exclude_scan_paths,(a,o)=>(x(),T("div",{key:"exclude-pattern-"+o},[t("div",pt,[s(L,{class:"settings__item-form mt-0",color:"primary",variant:"outlined","hide-details":"",placeholder:"例: E:\\TV-Record\\Trash",density:S(l)?"compact":"default",modelValue:n.value.video.exclude_scan_paths[o],"onUpdate:modelValue":g=>n.value.video.exclude_scan_paths[o]=g},null,8,["density","modelValue","onUpdate:modelValue"]),P((x(),T("button",{class:"settings__item-delete-button",onClick:g=>n.value.video.exclude_scan_paths.splice(o,1)},[...e[68]||(e[68]=[t("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)])],8,_t)),[[D]])])]))),128)),s($,{class:"mt-3",color:"background-lighten-2",variant:"flat",height:"40px",onClick:e[15]||(e[15]=a=>n.value.video.exclude_scan_paths.push(""))},{default:p(()=>[s(r,{icon:"fluent:add-12-filled",height:"17px"}),e[69]||(e[69]=t("span",{class:"ml-1"},"除外フォルダを追加",-1))]),_:1})]),t("div",bt,[s(r,{icon:"fluent:image-multiple-16-filled",width:"22px"}),e[73]||(e[73]=t("span",{class:"ml-2"},"キャプチャ",-1))]),t("div",Vt,[e[79]||(e[79]=t("div",{class:"settings__item-heading"},"アップロードしたキャプチャ画像の保存先フォルダの絶対パス",-1)),t("div",yt,[s(c,{class:"link",to:"/settings/capture"},{default:p(()=>[...e[74]||(e[74]=[i("[キャプチャ]",-1)])]),_:1}),e[75]||(e[75]=i(" → [キャプチャの保存先] で [KonomiTV サーバーにアップロード] または [ブラウザでのダウンロードと、KonomiTV サーバーへのアップロードを両方行う] が選択されているときに利用されます。",-1)),e[76]||(e[76]=t("br",null,null,-1))]),e[80]||(e[80]=t("div",{class:"settings__item-label mt-1",style:{"padding-bottom":"2px"}},[i(" 複数の保存先フォルダを指定できます。"),t("br"),i(" 先頭から順に利用され、保存先フォルダがいっぱいになったら次の保存先フォルダに保存されます。"),t("br")],-1)),(x(!0),T(F,null,j(n.value.capture.upload_folders,(a,o)=>(x(),T("div",{key:"upload-folder-"+o},[t("div",kt,[s(L,{class:"settings__item-form mt-0",color:"primary",variant:"outlined","hide-details":"",placeholder:"例: E:\\TV-Capture",density:S(l)?"compact":"default",modelValue:n.value.capture.upload_folders[o],"onUpdate:modelValue":g=>n.value.capture.upload_folders[o]=g},null,8,["density","modelValue","onUpdate:modelValue"]),P((x(),T("button",{class:"settings__item-delete-button",onClick:g=>n.value.capture.upload_folders.splice(o,1)},[...e[77]||(e[77]=[t("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)])],8,wt)),[[D]])])]))),128)),s($,{class:"mt-3",color:"background-lighten-2",variant:"flat",height:"40px",onClick:e[16]||(e[16]=a=>n.value.capture.upload_folders.push(""))},{default:p(()=>[s(r,{icon:"fluent:add-12-filled",height:"17px"}),e[78]||(e[78]=t("span",{class:"ml-1"},"保存先フォルダを追加",-1))]),_:1})]),s($,{class:"settings__save-button bg-secondary mt-6",variant:"flat",onClick:e[17]||(e[17]=a=>m())},{default:p(()=>[s(r,{icon:"fluent:save-16-filled",class:"mr-2",height:"23px"}),e[81]||(e[81]=i("サーバー設定を更新 ",-1))]),_:1}),t("div",xt,[s(r,{icon:"fluent:person-board-20-filled",width:"22px"}),e[82]||(e[82]=t("span",{class:"ml-2"},"アカウント",-1))]),t("div",Ct,[e[87]||(e[87]=t("div",{class:"settings__item-heading"},"アカウントの管理",-1)),e[88]||(e[88]=t("div",{class:"settings__item-label"},[i(" 現在 KonomiTV に登録されているすべてのアカウントの一覧の確認、管理者権限の付与/剥奪、アカウントの削除ができます。"),t("br")],-1)),t("div",Tt,[e[84]||(e[84]=i(" ログイン中ユーザーの設定変更は、別途 ",-1)),s(c,{class:"link",to:"/settings/account"},{default:p(()=>[...e[83]||(e[83]=[i("アカウント設定画面",-1)])]),_:1}),e[85]||(e[85]=i(" から行ってください。",-1)),e[86]||(e[86]=t("br",null,null,-1))])]),s($,{class:"settings__save-button mt-4",variant:"flat",onClick:e[18]||(e[18]=a=>y.value=!y.value)},{default:p(()=>[s(r,{icon:"fluent:person-board-20-filled",height:"20px"}),e[89]||(e[89]=t("span",{class:"ml-1"},"アカウントの管理設定を開く",-1))]),_:1})],2),t("div",ht,[t("div",St,[s(r,{icon:"fluent:wrench-settings-20-filled",width:"22px"}),e[90]||(e[90]=t("span",{class:"ml-2"},"メンテナンス",-1))])]),t("div",{class:N(["settings__content",{"settings__content--disabled":d.value}])},[e[92]||(e[92]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading"},"サーバーログの表示"),t("div",{class:"settings__item-label"},[i(" KonomiTV サーバーの動作ログとアクセスログをリアルタイムで表示します。"),t("br"),i(" サーバーの動作状況の確認やトラブルシューティングに役立ちます。"),t("br")])],-1)),s($,{class:"settings__save-button mt-5",color:"background-lighten-2",variant:"flat",onClick:e[19]||(e[19]=a=>_.value=!_.value)},{default:p(()=>[s(r,{icon:"fluent:document-text-16-regular",height:"20px"}),e[91]||(e[91]=t("span",{class:"ml-2"},"サーバーログを表示",-1))]),_:1})],2),t("div",Ut,[e[96]||(e[96]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading"},"KonomiTV のデータベースを更新"),t("div",{class:"settings__item-label"},[i(" KonomiTV のデータベースに保存されている、チャンネル情報・番組情報・Twitter アカウント情報などの外部 API に依存するデータをすべて更新します。"),t("br"),i(" 即座に外部 API からのデータ更新を反映させたいときに利用してください。"),t("br")])],-1)),s($,{class:"settings__save-button mt-5",color:"background-lighten-2",variant:"flat",onClick:e[20]||(e[20]=a=>k())},{default:p(()=>[s(r,{icon:"iconoir:database-backup",height:"20px"}),e[93]||(e[93]=t("span",{class:"ml-2"},"データベースを更新",-1))]),_:1}),e[97]||(e[97]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading"},"録画フォルダの一括スキャンを手動実行"),t("div",{class:"settings__item-label"},[i(" 録画フォルダ内のファイルは、通常 KonomiTV サーバーの起動時に自動的にスキャンされます。"),t("br"),i(" 録画ファイルが KonomiTV に正しく反映されていない場合にのみ実行してみてください。"),t("br")]),t("div",{class:"settings__item-label mt-1"},[t("strong",null,"大量の録画ファイルが保存されている環境では、処理完了まで数時間〜数日以上かかることがあります。"),t("br")])],-1)),s($,{class:"settings__save-button mt-5",color:"background-lighten-2",variant:"flat",onClick:e[21]||(e[21]=a=>w())},{default:p(()=>[s(r,{icon:"fluent:folder-sync-20-regular",height:"20px"}),e[94]||(e[94]=t("span",{class:"ml-2"},"録画フォルダの一括スキャンを手動実行",-1))]),_:1}),e[98]||(e[98]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading"},"録画ファイルのバックグラウンド解析タスクを再実行"),t("div",{class:"settings__item-label"},[i(" 録画ファイルのメタデータ解析やサムネイル作成が完了していない場合に、これらの処理を再度実行します。"),t("br"),i(" PC のシャットダウンなどで途中で中断してしまった場合は、このボタンから処理を再開できます。"),t("br")]),t("div",{class:"settings__item-label mt-1"},[t("strong",null,"大量の録画ファイルが保存されている環境では、処理完了まで数時間〜数日以上かかることがあります。"),t("br")])],-1)),s($,{class:"settings__save-button mt-5",color:"background-lighten-2",variant:"flat",onClick:e[22]||(e[22]=a=>C())},{default:p(()=>[s(r,{icon:"fluent:book-arrow-clockwise-20-regular",height:"20px"}),e[95]||(e[95]=t("span",{class:"ml-2"},"バックグラウンド解析タスクを再実行",-1))]),_:1})]),t("div",{class:N(["settings__content",{"settings__content--disabled":d.value}])},[e[101]||(e[101]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading text-error-lighten-1"},"KonomiTV サーバーを再起動"),t("div",{class:"settings__item-label"},[i(" KonomiTV サーバーを再起動します。サーバー設定の変更を反映するには再起動が必要です。"),t("br"),t("strong",null,"再起動を実行すると、すべての視聴中セッションが切断されます。"),i("十分注意してください。"),t("br")])],-1)),s($,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:e[23]||(e[23]=a=>I())},{default:p(()=>[s(r,{icon:"fluent:arrow-counterclockwise-20-filled",height:"20px"}),e[99]||(e[99]=t("span",{class:"ml-2"},"KonomiTV サーバーを再起動",-1))]),_:1}),e[102]||(e[102]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading text-error-lighten-1"},"KonomiTV サーバーをシャットダウン"),t("div",{class:"settings__item-label"},[i(" KonomiTV サーバーをシャットダウンします。"),t("br"),t("strong",null,"シャットダウンを実行すると、再度手動で KonomiTV サーバーを起動するまで KonomiTV にアクセスできなくなります。"),i("十分注意してください。"),t("br")]),t("div",{class:"settings__item-label mt-1"},[i(" なお、Linux 版 KonomiTV サーバーはプロセス管理を PM2 / Docker に委譲しているため、シャットダウン後は自動で再起動されます。完全にシャットダウンするには、PM2 / Docker 側でサービスを停止してください。"),t("br")])],-1)),s($,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:e[24]||(e[24]=a=>M())},{default:p(()=>[s(r,{icon:"fluent:power-20-filled",height:"20px"}),e[100]||(e[100]=t("span",{class:"ml-2"},"KonomiTV サーバーをシャットダウン",-1))]),_:1})],2),s(Be,{modelValue:y.value,"onUpdate:modelValue":e[25]||(e[25]=a=>y.value=a)},null,8,["modelValue"]),s(qe,{modelValue:_.value,"onUpdate:modelValue":e[26]||(e[26]=a=>_.value=a)},null,8,["modelValue"])]),_:1})}}});export{Gt as default};
