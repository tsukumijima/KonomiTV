import{d as _,m as g,U as v,u as f,_ as c,k as b,h as r,b as l,w as y,a as s,c as u,r as d,l as i,e as Y,t as V,V as S,o as a,R as h}from"./index-C90hjLTU.js";import{C as w}from"./CaptureManager-CZ6fLzho.js";import{S as C}from"./Base-DHJTPWr-.js";import{c as m}from"./VSelect-CWOpdxGi.js";import{c as M}from"./VTextField-DDySwIAQ.js";import{V as k}from"./VSwitch-DhhO6NGN.js";import"./ChannelsStore-EWe2Nuou.js";import"./Videos-B6NEv8p4.js";import"./SPHeaderBar-Chf0UYUT.js";import"./ssrBoot-OnzqbV2B.js";import"./VAvatar-D6Bl7QrI.js";import"./VChip-CD6qvBgt.js";const B=_({name:"Settings-Capture",components:{SettingsBase:C},data(){return{is_form_dense:v.isSmartphoneHorizontal(),capture_save_mode:[{title:"ブラウザでダウンロード",value:"Browser"},{title:"KonomiTV サーバーにアップロード",value:"UploadServer"},{title:"ブラウザでのダウンロードと、KonomiTV サーバーへのアップロードを両方行う",value:"Both"}],capture_caption_mode:[{title:"映像のみのキャプチャを保存する",value:"VideoOnly"},{title:"字幕を合成したキャプチャを保存する",value:"CompositingCaption"},{title:"映像のみのキャプチャと、字幕を合成したキャプチャを両方保存する",value:"Both"}],capture_filename_pattern_preview:"",is_macro_list_visible:!1}},computed:{...g(f)},watch:{"settingsStore.settings.capture_filename_pattern":{handler(){const e=w.generateCaptureFilename();this.capture_filename_pattern_preview=`プレビュー: ${e}.jpg / ${e}_caption.jpg`},immediate:!0}}}),T={class:"settings__heading"},D={class:"settings__content"},$={class:"settings__item"},H={class:"settings__item"},U={class:"settings__item"},P={class:"settings__item-label"},I={key:0,class:"ml-4 mt-3"},N={class:"settings__item settings__item--switch settings__item--sync-disabled"};function K(e,t,j,z,F,R){const o=d("Icon"),p=d("SettingsBase");return a(),b(p,null,{default:r(()=>[l("h2",T,[y((a(),u("a",{class:"settings__back-button",onClick:t[0]||(t[0]=n=>e.$router.back())},[s(o,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[h]]),s(o,{icon:"fluent:image-multiple-16-filled",width:"26px"}),t[6]||(t[6]=l("span",{class:"ml-2"},"キャプチャ",-1))]),l("div",D,[l("div",$,[t[7]||(t[7]=l("div",{class:"settings__item-heading"},"キャプチャの保存先",-1)),t[8]||(t[8]=l("div",{class:"settings__item-label"},[l("ul",{class:"settings__item-option-list"},[l("li",null,[l("strong",null,"ブラウザでダウンロード"),i("：お使いのデバイスのダウンロードフォルダに直接保存します。"),l("br"),i(" シンプルですが、保存先フォルダは変更できません。"),l("b",null,"iPhone・iPad でホーム画面に追加したアイコンから起動した場合、ダウンロード時にファイル概要画面が表示され、視聴の妨げになる場合があります。")]),l("li",null,[l("strong",null,"サーバーにアップロード"),i("：サーバー設定で指定したフォルダに保存します。"),l("br"),i(" どのデバイスから撮っても1つのフォルダにまとめて保存できます。他のデバイスからキャプチャを見るには、保存先フォルダをネットワーク共有するか、サーバー PC に直接アクセスする必要があります。 ")])]),l("p",{class:"settings__item-note"},"※ 将来的には、サーバー PC に保存されたキャプチャを KonomiTV 上で閲覧できる機能を追加予定です。")],-1)),s(m,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:e.is_form_dense?"compact":"default",items:e.capture_save_mode,modelValue:e.settingsStore.settings.capture_save_mode,"onUpdate:modelValue":t[1]||(t[1]=n=>e.settingsStore.settings.capture_save_mode=n)},null,8,["density","items","modelValue"])]),l("div",H,[t[9]||(t[9]=l("div",{class:"settings__item-heading"},"字幕表示時のキャプチャの保存モード",-1)),t[10]||(t[10]=l("div",{class:"settings__item-label"},[i(" 字幕表示中にキャプチャを撮るとき、映像に字幕を合成するかを設定します。"),l("br"),i(" 字幕非表示時は、常に映像 (+コメント付きキャプチャ撮影時はコメント) のみのキャプチャが保存されます。"),l("br")],-1)),s(m,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:e.is_form_dense?"compact":"default",items:e.capture_caption_mode,modelValue:e.settingsStore.settings.capture_caption_mode,"onUpdate:modelValue":t[2]||(t[2]=n=>e.settingsStore.settings.capture_caption_mode=n)},null,8,["density","items","modelValue"])]),l("div",U,[t[18]||(t[18]=l("div",{class:"settings__item-heading"},"キャプチャの保存ファイル名パターン",-1)),l("div",P,[t[12]||(t[12]=i(" 保存時のファイル名（拡張子なし）を設定します。デフォルトは Capture_%date%-%time% です。",-1)),t[13]||(t[13]=l("br",null,null,-1)),t[14]||(t[14]=i(" 字幕を合成したキャプチャのファイル名には、自動で _caption が追加されます。",-1)),t[15]||(t[15]=l("br",null,null,-1)),t[16]||(t[16]=i(" ファイル名パターンには、以下の TVTest 互換マクロを利用できます。",-1)),t[17]||(t[17]=l("br",null,null,-1)),s(S,{class:"settings__save-button mt-3 px-3 py-0",style:{height:"36px","font-size":"14px"},variant:"flat",onClick:t[3]||(t[3]=n=>e.is_macro_list_visible=!e.is_macro_list_visible)},{default:r(()=>[s(o,{icon:e.is_macro_list_visible?"fluent:chevron-up-20-filled":"fluent:chevron-down-20-filled",class:"mr-1",height:"19px"},null,8,["icon"]),i(" "+V(e.is_macro_list_visible?"利用可能な TVTest 互換マクロ一覧を非表示":"利用可能な TVTest 互換マクロ一覧を表示"),1)]),_:1}),e.is_macro_list_visible?(a(),u("ul",I,[...t[11]||(t[11]=[l("li",null,[i("現在日時 "),l("ul",{class:"ml-4"},[l("li",null,"%date%: 年月日 (YYYYMMDD)"),l("li",null,"%year%: 年 (YYYY)"),l("li",null,"%year2%: 年 (YY)"),l("li",null,"%month%: 月"),l("li",null,"%month2%: 月 (2桁)"),l("li",null,"%day%: 日"),l("li",null,"%day2%: 日 (2桁)"),l("li",null,"%time%: 時分秒 (時分秒 / HHMMSS)"),l("li",null,"%hour%: 時"),l("li",null,"%hour2%: 時 (2桁)"),l("li",null,"%minute%: 分"),l("li",null,"%minute2%: 分 (2桁)"),l("li",null,"%second%: 秒"),l("li",null,"%second2%: 秒 (2桁)"),l("li",null,"%day-of-week%: 曜日 (漢字)")])],-1),l("li",null,[i("番組開始日時 "),l("ul",{class:"ml-4"},[l("li",null,"%start-date%: 年月日 (YYYYMMDD)"),l("li",null,"%start-year%: 年 (YYYY)"),l("li",null,"%start-year2%: 年 (YY)"),l("li",null,"%start-month%: 月"),l("li",null,"%start-month2%: 月 (2桁)"),l("li",null,"%start-day%: 日"),l("li",null,"%start-day2%: 日 (2桁)"),l("li",null,"%start-time%: 時刻 (時分秒 / HHMMSS)"),l("li",null,"%start-hour%: 時"),l("li",null,"%start-hour2%: 時 (2桁)"),l("li",null,"%start-minute%: 分"),l("li",null,"%start-minute2%: 分 (2桁)"),l("li",null,"%start-second%: 秒"),l("li",null,"%start-second2%: 秒 (2桁)"),l("li",null,"%start-day-of-week%: 曜日 (漢字)")])],-1),l("li",null,[i("番組終了日時 "),l("ul",{class:"ml-4"},[l("li",null,"%end-date%: 年月日 (YYYYMMDD)"),l("li",null,"%end-year%: 年 (YYYY)"),l("li",null,"%end-year2%: 年 (YY)"),l("li",null,"%end-month%: 月"),l("li",null,"%end-month2%: 月 (2桁)"),l("li",null,"%end-day%: 日"),l("li",null,"%end-day2%: 日 (2桁)"),l("li",null,"%end-time%: 時分秒 (時分秒 / HHMMSS)"),l("li",null,"%end-hour%: 時"),l("li",null,"%end-hour2%: 時 (2桁)"),l("li",null,"%end-minute%: 分"),l("li",null,"%end-minute2%: 分 (2桁)"),l("li",null,"%end-second%: 秒"),l("li",null,"%end-second2%: 秒 (2桁)"),l("li",null,"%end-day-of-week%: 曜日 (漢字)")])],-1),l("li",null,[i("番組長 "),l("ul",{class:"ml-4"},[l("li",null,"%event-duration-hour%: 時間"),l("li",null,"%event-duration-hour2%: 時間 (2桁)"),l("li",null,"%event-duration-min%: 分"),l("li",null,"%event-duration-min2%: 分 (2桁)"),l("li",null,"%event-duration-sec%: 秒"),l("li",null,"%event-duration-sec2%: 秒 (2桁)")])],-1),l("li",null,"%channel-name%: チャンネル名",-1),l("li",null,"%channel-no%: リモコン番号",-1),l("li",null,"%channel-no2%: リモコン番号 (2桁)",-1),l("li",null,"%channel-no3%: リモコン番号 (3桁)",-1),l("li",null,"%event-name%: 番組名",-1),l("li",null,"%event-id%: イベント ID",-1),l("li",null,"%service-name%: サービス名",-1),l("li",null,"%service-id%: サービス ID",-1)])])):Y("",!0)]),s(M,{class:"settings__item-form mt-6",color:"primary",variant:"outlined","hide-details":"",density:e.is_form_dense?"compact":"default",label:e.capture_filename_pattern_preview,modelValue:e.settingsStore.settings.capture_filename_pattern,"onUpdate:modelValue":t[4]||(t[4]=n=>e.settingsStore.settings.capture_filename_pattern=n)},null,8,["density","label","modelValue"])]),l("div",N,[t[19]||(t[19]=l("label",{class:"settings__item-heading",for:"capture_copy_to_clipboard"},"キャプチャをクリップボードにコピーする",-1)),t[20]||(t[20]=l("label",{class:"settings__item-label",for:"capture_copy_to_clipboard"},[i(" オンにすると、撮ったキャプチャをクリップボードにもコピーできます。"),l("br"),i(" iPhone・iPad などクリップボードの履歴をサポートしていない環境では、この設定をオンにしてキャプチャを撮ると、以前のクリップボードが上書きされます。注意してください。"),l("br")],-1)),s(k,{class:"settings__item-switch",color:"primary",id:"capture_copy_to_clipboard","hide-details":"",modelValue:e.settingsStore.settings.capture_copy_to_clipboard,"onUpdate:modelValue":t[5]||(t[5]=n=>e.settingsStore.settings.capture_copy_to_clipboard=n)},null,8,["modelValue"])])])]),_:1})}const ll=c(B,[["render",K]]);export{ll as default};
