import{g as me,p as _e,ai as pe,aH as fe,d as p,u as be,al as ye,aI as he,c as r,ao as ee,F as Y,X as se,Y as G,_ as q,H as u,N as h,L as e,O as b,a1 as Z,a2 as te,Z as Q,U as d,G as k,b1 as O,a9 as X,ab as ne,K as w,a5 as A,a3 as we,a6 as Ve,b2 as xe,b3 as ke,$ as M,w as N,M as j,J as C,P as L,S as I,R as z}from"./index-LUcZSfg3.js";import{u as Pe}from"./Navigation-BgRKLSNg.js";import{V as Ce}from"./VSwitch-BUkBw4sR.js";import{V as $e}from"./VSlider-B5M6i1zC.js";import{u as Se,m as De,c as ae,a as F}from"./VTextField-BDf-Yp3u.js";import{m as Re,e as re,V as J}from"./VSelect-BmKGxRth.js";import{R as K}from"./Reservations-Bw3X7ADR.js";import{V as Ue}from"./VDialog-BBKQPlvn.js";import{V as Ie,a as Be,b as Ee,c as Te}from"./VCard-BS7Vnm3K.js";import{V as Le}from"./VSpacer-ChgMJFbm.js";const Me=_e({...De(),...ye(Re(),["inline"])},"VCheckbox"),Fe=me()({name:"VCheckbox",inheritAttrs:!1,props:Me(),emits:{"update:modelValue":s=>!0,"update:focused":s=>!0},setup(s,V){let{attrs:i,slots:f}=V;const g=pe(s,"modelValue"),{isFocused:a,focus:$,blur:c}=Se(s),m=fe(),S=p(()=>s.id||`checkbox-${m}`);return be(()=>{const[x,P]=he(i),D=ae.filterProps(s),B=re.filterProps(s);return r(ae,ee({class:["v-checkbox",s.class]},x,D,{modelValue:g.value,"onUpdate:modelValue":U=>g.value=U,id:S.value,focused:a.value,style:s.style}),{...f,default:U=>{let{id:y,messagesId:T,isDisabled:_,isReadonly:t,isValid:E}=U;return r(re,ee(B,{id:y.value,"aria-describedby":T.value,disabled:_.value,readonly:t.value},P,{error:E.value===!1,modelValue:g.value,"onUpdate:modelValue":l=>g.value=l,onFocus:$,onBlur:c}),f)}})}),{}}}),Ae=Y({name:"ReservationProgramInfo",props:{reservation:{type:Object,default:null},program:{type:Object,default:null},channel:{type:Object,default:null}},data(){return{Utils:Object.freeze(se),ProgramUtils:Object.freeze(G)}},computed:{displayProgram(){var s;return((s=this.reservation)==null?void 0:s.program)??this.program},displayChannel(){var s;return((s=this.reservation)==null?void 0:s.channel)??this.channel}},methods:{onLogoError(s){const V=s.target;V.src=`${se.api_base_url}/channels/gr001/logo`}}}),Oe={key:0,class:"program-container"},He={class:"program-info"},Ne=["innerHTML"],je={class:"program-info__broadcaster"},ze=["src"],Je={class:"program-info__broadcaster-container"},Ke={class:"d-flex align-center"},Ge={class:"program-info__broadcaster-number"},Ze={class:"program-info__broadcaster-name"},Xe={class:"program-info__broadcaster-time"},Ye=["innerHTML"],qe={class:"program-info__genre-container"},Qe={class:"mt-5"},We={class:"program-info__status"},es={class:"ml-2"},ss={class:"program-info__status"},ts={class:"ml-2"},as={key:0,class:"program-info__status"},rs={class:"ml-2"},ns={class:"program-detail-container"},is={class:"program-detail__heading"},os=["innerHTML"];function ls(s,V,i,f,g,a){const $=Q("Icon");return s.displayProgram&&s.displayChannel?(d(),u("div",Oe,[e("section",He,[e("h1",{class:"program-info__title",innerHTML:s.ProgramUtils.decorateProgramInfo(s.displayProgram,"title")},null,8,Ne),e("div",je,[e("img",{class:"program-info__broadcaster-icon",src:`${s.Utils.api_base_url}/channels/${s.displayChannel.id}/logo`,onError:V[0]||(V[0]=(...c)=>s.onLogoError&&s.onLogoError(...c))},null,40,ze),e("div",Je,[e("div",Ke,[e("div",Ge,"Ch: "+b(s.displayChannel.channel_number),1),e("div",Ze,b(s.displayChannel.name),1)]),e("div",Xe,b(s.ProgramUtils.getProgramTime(s.displayProgram)),1)])]),e("div",{class:"program-info__description",innerHTML:s.ProgramUtils.decorateProgramInfo(s.displayProgram,"description")},null,8,Ye),e("div",qe,[(d(!0),u(Z,null,te(s.displayProgram.genres??[],(c,m)=>(d(),u("div",{class:"program-info__genre",key:m},b(c.major)+" / "+b(c.middle),1))),128))]),e("div",Qe,[e("div",We,[r($,{icon:"fluent:video-16-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",es,"映像: "+b(s.displayProgram.video_codec)+" / "+b(s.displayProgram.video_resolution),1)]),e("div",ss,[r($,{icon:"fluent:headphones-sound-wave-20-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",ts,"主音声: "+b(s.displayProgram.primary_audio_type)+" "+b(s.displayProgram.primary_audio_sampling_rate||"Unknown")+" / "+b(s.displayProgram.primary_audio_language),1)]),s.displayProgram.secondary_audio_type?(d(),u("div",as,[r($,{icon:"fluent:headphones-sound-wave-20-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",rs,"副音声: "+b(s.displayProgram.secondary_audio_type)+" "+b(s.displayProgram.secondary_audio_sampling_rate||"Unknown")+" / "+b(s.displayProgram.secondary_audio_language),1)])):h("",!0)])]),e("section",ns,[(d(!0),u(Z,null,te(s.displayProgram.detail??{},(c,m)=>(d(),u("div",{class:"program-detail",key:m},[e("h2",is,b(m),1),e("div",{class:"program-detail__text",innerHTML:s.Utils.URLtoLink(c)},null,8,os)]))),128))])])):h("",!0)}const ds=q(Ae,[["render",ls],["__scopeId","data-v-3ce7819b"]]),us={class:"reservation-recording-settings"},cs={key:0,class:"recording-warning-banner"},vs={class:"reservation-recording-settings__section"},gs={class:"reservation-recording-settings__header"},ms={class:"reservation-recording-settings__section"},_s={class:"reservation-recording-settings__slider"},ps={class:"reservation-recording-settings__section"},fs={class:"reservation-recording-settings__section"},bs={class:"reservation-recording-settings__section"},ys={class:"reservation-recording-settings__margin-default"},hs={class:"reservation-recording-settings__margin-controls"},ws={class:"reservation-recording-settings__section"},Vs={class:"reservation-recording-settings__section"},xs={class:"reservation-recording-settings__section"},ks={class:"reservation-recording-settings__section"},Ps={class:"reservation-recording-settings__description"},Cs=Y({__name:"ReservationRecordingSettings",props:{reservation:{},hasChanges:{type:Boolean}},emits:["updateSettings","changesDetected"],setup(s,{emit:V}){const i=s,f=V,g=Pe(),a=k(structuredClone(O(i.reservation.record_settings))),$=k(structuredClone(O(i.reservation.record_settings))),c=p({get:()=>a.value.recording_folders.length>0?a.value.recording_folders[0].recording_folder_path:"",set:_=>{S(_,m.value)}}),m=p({get:()=>a.value.recording_folders.length>0&&a.value.recording_folders[0].recording_file_name_template||"",set:_=>{S(c.value,_)}}),S=(_,t)=>{const E=_.trim()!=="",l=t.trim()!=="";!E&&!l?a.value.recording_folders=[]:(a.value.recording_folders.length===0&&a.value.recording_folders.push({recording_folder_path:"",recording_file_name_template:null,is_oneseg_separate_recording_folder:!1}),a.value.recording_folders[0].recording_folder_path=_,a.value.recording_folders[0].recording_file_name_template=t||null)},x=k(a.value.recording_start_margin===null&&a.value.recording_end_margin===null),P=[{title:"デフォルト設定を使う",value:"Default"},{title:"録画する",value:"Enable"},{title:"録画しない",value:"Disable"}],D=[{title:"デフォルト設定を使う",value:"Default"},{title:"録画する",value:"Enable"},{title:"録画しない",value:"Disable"}],B=[{title:"デフォルト設定を使う",value:"Default"},{title:"何もしない",value:"Nothing"},{title:"スタンバイ",value:"Standby"},{title:"スタンバイ(復帰後再起動)",value:"StandbyAndReboot"},{title:"サスペンド",value:"Suspend"},{title:"サスペンド(復帰後再起動)",value:"SuspendAndReboot"},{title:"シャットダウン",value:"Shutdown"}],U=p(()=>JSON.stringify(a.value)!==JSON.stringify($.value));X(U,_=>{f("changesDetected",_)});const y=()=>{f("updateSettings",a.value)},T=()=>{x.value?(a.value.recording_start_margin=null,a.value.recording_end_margin=null):(a.value.recording_start_margin=10,a.value.recording_end_margin=5),y()};return X(()=>i.reservation,_=>{a.value=structuredClone(O(_.record_settings)),$.value=structuredClone(O(_.record_settings))},{deep:!0}),ne(async()=>{await g.fetchServerVersion()}),(_,t)=>{const E=Q("Icon");return d(),u("div",us,[s.reservation.is_recording_in_progress?(d(),u("div",cs,[r(E,{icon:"fluent:warning-16-filled",class:"recording-warning-banner__icon"}),t[11]||(t[11]=e("span",{class:"recording-warning-banner__text"}," 録画中の録画設定の変更はできません。 ",-1))])):h("",!0),e("div",vs,[e("div",gs,[t[12]||(t[12]=e("div",{class:"reservation-recording-settings__label"},"録画予約の有効/無効",-1)),r(Ce,{disabled:s.reservation.is_recording_in_progress,style:{height:"0","margin-top":"-40px","margin-right":"6px"},modelValue:a.value.is_enabled,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.value.is_enabled=l),y],color:"primary",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),t[13]||(t[13]=e("div",{class:"reservation-recording-settings__description mb-0"},[w(" 予約が無効なときは、この番組の録画動作を行いません。"),e("br"),w(" キーワード自動予約条件により不必要な番組が予約されてしまっているときは、予約を無効にしてみてください。(予約削除ではすぐ再追加されてしまい意味がありません。) ")],-1))]),e("div",ms,[t[14]||(t[14]=e("div",{class:"reservation-recording-settings__label"},"録画予約の優先度",-1)),t[15]||(t[15]=e("div",{class:"reservation-recording-settings__description mb-0"}," 放送時間が重なりチューナーが足りないときは、より優先度が高い予約から優先的に録画します。 ",-1)),e("div",_s,[r($e,{disabled:s.reservation.is_recording_in_progress,modelValue:a.value.priority,"onUpdate:modelValue":[t[1]||(t[1]=l=>a.value.priority=l),y],min:1,max:5,step:1,color:"primary",density:"compact","show-ticks":"always","thumb-label":"","hide-details":""},null,8,["disabled","modelValue"])])]),e("div",ps,[t[16]||(t[16]=e("div",{class:"reservation-recording-settings__label"},"録画フォルダのパス",-1)),t[17]||(t[17]=e("div",{class:"reservation-recording-settings__description"}," 空欄にすると、デフォルトの録画フォルダに保存されます。 ",-1)),r(F,{disabled:s.reservation.is_recording_in_progress,modelValue:c.value,"onUpdate:modelValue":[t[2]||(t[2]=l=>c.value=l),y],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:A(g).is_linux_environment?"/mnt/hdd/Records/2025年春アニメ":"E:\\Records\\2025年春アニメ"},null,8,["disabled","modelValue","placeholder"])]),e("div",fs,[t[18]||(t[18]=we('<div class="reservation-recording-settings__label" data-v-de631340>録画ファイル名テンプレート (マクロ)</div><div class="reservation-recording-settings__description" data-v-de631340> 空欄にすると、デフォルトの録画ファイル名テンプレート (マクロ) が録画ファイル名の変更に利用されます。<br data-v-de631340><div class="mt-1" data-v-de631340><a class="link" href="https://github.com/xtne6f/EDCB/blob/work-plus-s/Document/Readme_EpgTimer.txt#L929-L1008" target="_blank" data-v-de631340>テンプレート構文の一覧</a> / <a class="link" href="https://github.com/xtne6f/EDCB/blob/work-plus-s/Document/Readme_Mod.txt#%E3%83%9E%E3%82%AF%E3%83%AD" target="_blank" data-v-de631340>xtne6f 版での追加差分</a></div></div>',2)),r(F,{disabled:s.reservation.is_recording_in_progress,modelValue:m.value,"onUpdate:modelValue":[t[3]||(t[3]=l=>m.value=l),y],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:"$ZtoH(Title)$.ts"},null,8,["disabled","modelValue"])]),e("div",bs,[t[20]||(t[20]=e("div",{class:"reservation-recording-settings__label"},"録画マージン (秒)",-1)),t[21]||(t[21]=e("div",{class:"reservation-recording-settings__description"}," 番組開始時刻の何秒前から録画を開始し、番組終了時刻の何秒後に録画を終了するかの設定です。最低でも5秒以上をおすすめします。(0秒だと番組の冒頭/末尾が欠けてしまいます。) ",-1)),e("div",ys,[r(Fe,{disabled:s.reservation.is_recording_in_progress,id:"use-default-margin",modelValue:x.value,"onUpdate:modelValue":[t[4]||(t[4]=l=>x.value=l),T],color:"primary",density:"compact","hide-details":""},null,8,["disabled","modelValue"]),t[19]||(t[19]=e("label",{class:"reservation-recording-settings__margin-default-text",for:"use-default-margin",style:{"user-select":"none"}}," デフォルト設定を使う ",-1))]),e("div",hs,[r(F,{disabled:s.reservation.is_recording_in_progress||x.value,modelValue:a.value.recording_start_margin,"onUpdate:modelValue":[t[5]||(t[5]=l=>a.value.recording_start_margin=l),y],modelModifiers:{number:!0},color:"primary",variant:"outlined",density:"compact",type:"number","hide-details":"",prefix:"番組開始",suffix:"秒前",style:{width:"160px"}},null,8,["disabled","modelValue"]),r(F,{disabled:s.reservation.is_recording_in_progress||x.value,modelValue:a.value.recording_end_margin,"onUpdate:modelValue":[t[6]||(t[6]=l=>a.value.recording_end_margin=l),y],modelModifiers:{number:!0},color:"primary",variant:"outlined",density:"compact",type:"number","hide-details":"",prefix:"番組終了",suffix:"秒後",style:{width:"166px"}},null,8,["disabled","modelValue"])])]),e("div",ws,[t[22]||(t[22]=e("div",{class:"reservation-recording-settings__label"},"字幕データ録画設定",-1)),t[23]||(t[23]=e("div",{class:"reservation-recording-settings__description"},[w(" 字幕データはほとんど録画容量を消費しません。"),e("br"),w(" [録画する] に設定しておくことを強くおすすめします。 ")],-1)),r(J,{disabled:s.reservation.is_recording_in_progress,modelValue:a.value.caption_recording_mode,"onUpdate:modelValue":[t[7]||(t[7]=l=>a.value.caption_recording_mode=l),y],items:P,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",Vs,[t[24]||(t[24]=e("div",{class:"reservation-recording-settings__label"},"データ放送録画設定",-1)),t[25]||(t[25]=e("div",{class:"reservation-recording-settings__description"},[w(" データ放送は30分で 500MB 以上録画容量を消費する上、KonomiTV は録画再生時のデータ放送表示に非対応です。"),e("br"),w(" [録画しない] に設定しておくことを強くおすすめします。 ")],-1)),r(J,{disabled:s.reservation.is_recording_in_progress,modelValue:a.value.data_broadcasting_recording_mode,"onUpdate:modelValue":[t[8]||(t[8]=l=>a.value.data_broadcasting_recording_mode=l),y],items:D,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",xs,[t[26]||(t[26]=e("div",{class:"reservation-recording-settings__label"},"録画後動作設定",-1)),t[27]||(t[27]=e("div",{class:"reservation-recording-settings__description"}," 通常は [何もしない] のままで大丈夫です。録画後に録画 PC をスリープさせておきたい方のみ設定してください。環境によっては復帰できず以降の録画に失敗することがあります。 ",-1)),r(J,{disabled:s.reservation.is_recording_in_progress,modelValue:a.value.post_recording_mode,"onUpdate:modelValue":[t[9]||(t[9]=l=>a.value.post_recording_mode=l),y],items:B,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",ks,[t[28]||(t[28]=e("div",{class:"reservation-recording-settings__label"},"録画後実行スクリプトのパス",-1)),e("div",Ps," 通常は空欄のままで大丈夫です。録画後に指定の "+b(A(g).is_linux_environment?".sh / .lua":".bat / .ps1 / .lua")+" スクリプトを実行させたい方のみ設定してください。 ",1),r(F,{disabled:s.reservation.is_recording_in_progress,modelValue:a.value.post_recording_bat_file_path,"onUpdate:modelValue":[t[10]||(t[10]=l=>a.value.post_recording_bat_file_path=l),y],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:A(g).is_linux_environment?"/var/local/edcb/transcode.sh":"C:\\DTV\\EDCB\\Transcode.bat"},null,8,["disabled","modelValue","placeholder"])])])}}}),$s=q(Cs,[["__scopeId","data-v-de631340"]]),Ss=Ve("serveSettings",()=>{const s=k(structuredClone(xe)),V=k(!1),i=k(!1);let f=null;async function g(){return V.value?s.value:f!==null?await f:(i.value=!0,f=ke.fetchServerSettings().then(a=>(a!==null&&(s.value=a,V.value=!0),a)).finally(()=>{i.value=!1,f=null}),await f)}return{server_settings:s,is_loaded:V,is_loading:i,fetchServerSettingsOnce:g}}),Ds={class:"reservation-detail-drawer__header"},Rs={class:"reservation-detail-drawer__tab-text"},Us={class:"reservation-detail-drawer__content"},Is={key:0,class:"reservation-detail-drawer__info"},Bs={key:0,class:"status-banner status-banner--warning mb-4"},Es={key:1,class:"status-banner status-banner--error mb-4"},Ts={key:2,class:"status-banner status-banner--info mb-4"},Ls={key:1,class:"reservation-detail-drawer__settings"},Ms={key:0,class:"reservation-detail-drawer__footer"},Fs={class:"reservation-detail-drawer__actions"},As={key:1,class:"reservation-detail-drawer__footer"},Os={class:"reservation-detail-drawer__actions"},Hs={key:0,class:"mb-4"},Ns=["innerHTML"],js={class:"text-body-2 text-text-darken-1"},zs={key:1,class:"warning-banner warning-banner--recording"},Js={key:2,class:"warning-banner warning-banner--normal"},Ks={key:3,class:"warning-banner warning-banner--keyword mt-3"},Gs=Y({__name:"ReservationDetailDrawer",props:{reservation:{},program:{},channel:{},isPastProgram:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue","updated","deleted","added"],setup(s,{emit:V}){const i=s,f=V,g=p({get:()=>i.modelValue,set:o=>f("update:modelValue",o)}),a=Ss(),$=p(()=>a.server_settings),c=k("info"),m=k(!1),S=k(!1),x=k(!1),P=k(null),D=k(!1),B=p(()=>i.reservation!==null),U=p(()=>i.reservation!==null&&i.reservation.id===-1),y=p(()=>B.value&&!U.value),T=p(()=>{var o;return((o=i.reservation)==null?void 0:o.program)??i.program??null}),_=p(()=>$.value.general.backend==="EDCB"),t=p(()=>B.value&&!i.isPastProgram),E=p(()=>U.value&&!i.isPastProgram),l=p(()=>{var o;return((o=i.reservation)==null?void 0:o.comment.includes("EPG自動予約"))??!1}),ie=p(()=>{var o;return((o=i.reservation)==null?void 0:o.is_recording_in_progress)??!1}),W=p(()=>{var o;return((o=i.reservation)==null?void 0:o.recording_availability)??"Full"}),oe=p(()=>W.value==="Partial"),le=p(()=>W.value==="Unavailable");ne(async()=>{await a.fetchServerSettingsOnce()}),X(g,o=>{o?(c.value="info",m.value=!1,document.documentElement.classList.add("v-overlay-scroll-blocked")):document.documentElement.classList.remove("v-overlay-scroll-blocked")});const H=()=>{m.value&&!confirm("変更が保存されていません。ドロワーを閉じますか？")||(g.value=!1)},de=o=>{P.value=o},ue=async()=>{if(!m.value||S.value||!P.value||!i.reservation)return;const o=P.value.caption_recording_mode==="Default",n=P.value.data_broadcasting_recording_mode==="Default";if(o!==n){I.warning("字幕データ録画設定・データ放送録画設定を明示的に設定する際は、両方とも「デフォルト設定を使う」以外に設定してください。");return}S.value=!0;try{if(await K.updateReservation(i.reservation.id,P.value)){I.success("録画設定の変更を保存しました。");const R={...i.reservation,record_settings:P.value};f("updated",R),m.value=!1}}catch(v){console.error("Failed to save settings:",v),I.error("録画設定の保存に失敗しました。")}finally{S.value=!1}},ce=()=>{D.value=!0},ve=async()=>{if(D.value=!1,!!i.reservation)try{await K.deleteReservation(i.reservation.id)&&(I.success("録画予約を削除しました。"),f("deleted",i.reservation.id),g.value=!1)}catch(o){console.error("Failed to delete reservation:",o)}},ge=async()=>{if(!(x.value||!T.value||!i.reservation)){if(!_.value){I.error("録画予約機能は EDCB バックエンド利用時のみ使用できます。");return}x.value=!0;try{const o=P.value??i.reservation.record_settings,n=o.caption_recording_mode==="Default",v=o.data_broadcasting_recording_mode==="Default";if(n!==v){I.warning("字幕データ録画設定・データ放送録画設定を明示的に設定する際は、両方とも「デフォルト設定を使う」以外に設定してください。"),x.value=!1;return}await K.addReservation(T.value.id,o)&&(I.success("録画予約を追加しました。"),f("added"),g.value=!1)}catch(o){console.error("Failed to add reservation:",o),I.error("録画予約の追加に失敗しました。")}finally{x.value=!1}}};return(o,n)=>{const v=Q("Icon");return d(),u(Z,null,[e("div",{class:M(["reservation-detail-drawer__scrim",{"reservation-detail-drawer__scrim--visible":g.value}]),onClick:H},null,2),e("div",{class:M(["reservation-detail-drawer",{"reservation-detail-drawer--visible":g.value}])},[e("div",Ds,[e("div",{class:M(["reservation-detail-drawer__tabs",{"reservation-detail-drawer__tabs--single":!t.value}])},[N((d(),u("div",{class:M(["reservation-detail-drawer__tab",{"reservation-detail-drawer__tab--active":c.value==="info"}]),onClick:n[0]||(n[0]=R=>c.value="info")},[r(v,{icon:"fluent:info-12-regular",width:"20px",height:"20px"}),e("span",Rs,"番組情報 "+b(t.value?"":"（終了済み）"),1)],2)),[[z]]),t.value?N((d(),u("div",{key:0,class:M(["reservation-detail-drawer__tab",{"reservation-detail-drawer__tab--active":c.value==="settings"}]),onClick:n[1]||(n[1]=R=>c.value="settings")},[r(v,{icon:"material-symbols:settings-video-camera-outline-rounded",width:"20px",height:"20px"}),n[5]||(n[5]=e("span",{class:"reservation-detail-drawer__tab-text"},"録画設定",-1))],2)),[[z]]):h("",!0)],2),N((d(),u("div",{class:"reservation-detail-drawer__close",onClick:H},[r(v,{icon:"fluent:dismiss-16-filled",width:"22px",height:"22px"})])),[[z]])]),e("div",Us,[c.value==="info"?(d(),u("div",Is,[oe.value?(d(),u("div",Bs,[r(v,{icon:"fluent:warning-16-filled",class:"status-banner__icon"}),n[6]||(n[6]=e("span",{class:"status-banner__text"},[w(" チューナー不足のため、この番組は一部のみ録画されます。"),e("br"),w(" 優先度を上げるか、重複する録画予約を調整してください。 ")],-1))])):h("",!0),le.value?(d(),u("div",Es,[r(v,{icon:"fluent:error-circle-16-filled",class:"status-banner__icon"}),n[7]||(n[7]=e("span",{class:"status-banner__text"},[w(" チューナー不足のため、この番組は録画できません。"),e("br"),w(" 優先度を上げるか、重複する録画予約を削除してください。 ")],-1))])):h("",!0),!_.value&&!s.isPastProgram&&!B.value?(d(),u("div",Ts,[r(v,{icon:"fluent:info-16-regular",class:"status-banner__icon"}),n[8]||(n[8]=e("span",{class:"status-banner__text"}," 録画予約機能は EDCB バックエンド利用時のみ使用できます。 ",-1))])):h("",!0),r(ds,{reservation:s.reservation,program:s.program,channel:s.channel},null,8,["reservation","program","channel"])])):h("",!0),c.value==="settings"&&s.reservation?(d(),u("div",Ls,[r($s,{reservation:s.reservation,"has-changes":m.value,onUpdateSettings:de,onChangesDetected:n[2]||(n[2]=R=>m.value=R)},null,8,["reservation","has-changes"])])):h("",!0)]),s.isPastProgram?(d(),u("div",As,[e("div",Os,[r(L,{class:"px-3",variant:"text",onClick:H},{default:C(()=>[r(v,{icon:"fluent:dismiss-16-regular",width:"20px",height:"20px"}),n[12]||(n[12]=e("span",{class:"ml-1"},"閉じる",-1))]),_:1})])])):(d(),u("div",Ms,[e("div",Fs,[y.value?(d(),j(L,{key:0,class:"px-3",variant:"text",onClick:ce},{default:C(()=>[r(v,{icon:"fluent:delete-16-regular",width:"20px",height:"20px"}),n[9]||(n[9]=e("span",{class:"ml-1"},"予約を削除",-1))]),_:1})):h("",!0),y.value&&c.value==="settings"?(d(),j(L,{key:1,class:"px-3",color:"secondary",variant:"flat",disabled:!m.value,loading:S.value,onClick:ue},{default:C(()=>[r(v,{icon:"fluent:save-16-regular",width:"20px",height:"20px"}),n[10]||(n[10]=e("span",{class:"ml-1"},"変更を保存",-1))]),_:1},8,["disabled","loading"])):h("",!0),E.value?(d(),j(L,{key:2,class:"px-3",color:"secondary",variant:"flat",disabled:!_.value,loading:x.value,onClick:ge},{default:C(()=>[r(v,{icon:"fluent:timer-16-regular",width:"20px",height:"20px"}),n[11]||(n[11]=e("span",{class:"ml-1"},"予約を追加",-1))]),_:1},8,["disabled","loading"])):h("",!0)])]))],2),r(Ue,{modelValue:D.value,"onUpdate:modelValue":n[4]||(n[4]=R=>D.value=R),"max-width":"715"},{default:C(()=>[r(Ie,null,{default:C(()=>[r(Be,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:C(()=>[...n[13]||(n[13]=[w(" 録画予約を削除しますか？ ",-1)])]),_:1}),r(Ee,{class:"pt-2 pb-0"},{default:C(()=>[s.reservation?(d(),u("div",Hs,[e("div",{class:"text-h6 text-text mb-2",innerHTML:A(G).decorateProgramInfo(s.reservation.program,"title")},null,8,Ns),e("div",js,b(A(G).getProgramTime(s.reservation.program)),1)])):h("",!0),ie.value&&s.reservation?(d(),u("div",zs,[r(v,{icon:"fluent:warning-16-filled",class:"warning-banner__icon"}),n[14]||(n[14]=e("span",{class:"warning-banner__text"},[w(" この番組は現在録画中です。"),e("br"),w(" 予約を削除すると、現在までの録画ファイルは残りますが、残りの期間の録画は中断されます。 ")],-1))])):s.reservation?(d(),u("div",Js,[r(v,{icon:"fluent:info-16-regular",class:"warning-banner__icon"}),n[15]||(n[15]=e("span",{class:"warning-banner__text"}," 録画予約を削除すると、番組開始時刻までに再度予約を追加しない限り、この番組は録画されません。 ",-1))])):h("",!0),l.value&&s.reservation?(d(),u("div",Ks,[r(v,{icon:"fluent:warning-16-filled",class:"warning-banner__icon"}),n[16]||(n[16]=e("span",{class:"warning-banner__text"},[w(" この予約はキーワード自動予約で追加されました。削除してもすぐに再追加される可能性があります。"),e("br"),w(" 録画が不要な場合は削除ではなく「無効」にすることをおすすめします。 ")],-1))])):h("",!0)]),_:1}),r(Te,{class:"pt-4 px-6 pb-6"},{default:C(()=>[r(Le),r(L,{color:"text",variant:"text",onClick:n[3]||(n[3]=R=>D.value=!1)},{default:C(()=>[r(v,{icon:"fluent:dismiss-20-regular",width:"18px",height:"18px"}),n[17]||(n[17]=e("span",{class:"ml-1"},"キャンセル",-1))]),_:1}),r(L,{class:"px-3",color:"error",variant:"flat",onClick:ve},{default:C(()=>[r(v,{icon:"fluent:delete-20-regular",width:"18px",height:"18px"}),n[18]||(n[18]=e("span",{class:"ml-1"},"予約を削除",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),rt=q(Gs,[["__scopeId","data-v-e94bd241"]]);export{rt as R,Ss as u};
