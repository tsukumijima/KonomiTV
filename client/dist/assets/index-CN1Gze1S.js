import{d as te,q as W,a as V,bf as re,G as Y,x as ye,z as be,s as K,Q as ge}from"./index-Bwzgjc3Q.js";const _=null,{min:R,max:H,abs:le,floor:Se}=Math,ae=(e,t,o)=>R(o,H(t,e)),ce=e=>[...e].sort((t,o)=>t-o),ie=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},oe=e=>{let t,o;return()=>(t||(t=!0,o=e()),o)},F=-1,Z=(e,t,o)=>{const a=o?"unshift":"push";for(let f=0;f<t;f++)e[a](F);return e},$=(e,t)=>{const o=e.t[t];return o===F?e.o:o},we=(e,t,o)=>{const a=e.t[t]===F;return e.t[t]=o,e.i=R(t,e.i),a},X=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let o=e.i,a=e.u[o];for(;o<t;)a+=$(e,o),e.u[++o]=a;return e.i=t,a},A=(e,t,o=0,a=e.l-1)=>{for(;o<=a;){const f=Se((o+a)/2),v=X(e,f);if(v<=t){if(v+$(e,f)>t)return f;o=f+1}else a=f-1}return ae(o,0,e.l-1)},ue=(e,t,o)=>{const a=t-e.l;return e.i=o?-1:R(t-1,e.i),e.l=t,a>0?(Z(e.u,a),Z(e.t,a,o),e.o*a):(e.u.splice(a),(o?e.t.splice(0,-a):e.t.splice(a)).reduce((f,v)=>f-(v===F?e.o:v),0))},ke=typeof window<"u",de=()=>document.documentElement,ze=e=>e.ownerDocument,xe=e=>e.defaultView,fe=oe(()=>!!ke&&getComputedStyle(de()).direction==="rtl"),pe=oe(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ee=oe(()=>"scrollBehavior"in de().style),Oe=e=>!!e.p(),je=(e,t=40,o=4,a=0,f,v=!1)=>{let g=!!a,l=[],i=0,x=0,w=0,P=0,q=0,I=0,N=0,C=0,B=0,p=g?[0,H(a-1,0)]:_,r=[0,0],h=0;const c=((s,u)=>({o:u,t:Z([],s),l:s,i:-1,u:Z([],s)}))(e,t),M=new Set,E=()=>w-x,m=()=>E()+I+q,S=s=>((u,b,G,z)=>{if(z=R(z,u.l-1),X(u,z)<=b){const T=A(u,b+G,z);return[A(u,b,z,T),T]}{const T=A(u,b,void 0,z);return[T,A(u,b+G,T)]}})(c,s,i,r[0]),k=()=>(s=>s.l?X(s,s.l-1)+$(s,s.l-1):0)(c),n=s=>X(c,s)-I,d=s=>$(c,s),y=s=>{s&&(pe()&&C!==0?I+=s:(q+=s,P++))};return{h:()=>l,m:()=>(s=>[s.t.slice(),s.o])(c),v:()=>{if(N)return r;let[s,u]=S(H(0,m()));return p&&(s=R(s,p[0]),u=H(u,p[1])),C!==1&&(s-=H(0,o)),C!==2&&(u+=H(0,o)),r=[H(s,0),R(u,c.l-1)]},S:()=>A(c,m()),I:()=>A(c,m()+i),k:s=>c.t[s]===F,O:()=>!!p&&c.t.slice(H(0,p[0]-1),R(c.l-1,p[1]+1)+1).includes(F),j:n,T:d,B:()=>c.l,q:()=>w,P:()=>C!==0,p:()=>i,R:()=>x,M:k,N:()=>P,A:()=>(N=q,q=0,[N,B===2||E()+i>=k()]),C:(s,u)=>{const b=[s,u];return M.add(b),()=>{M.delete(b)}},H:(s,u)=>{let b,G,z=0;switch(s){case 1:{const T=N;N=0;const O=u-w,j=le(O);T&&j<le(T)+1||B!==0||(C=O<0?2:1),g&&(p=_,g=!1),w=u,z=4;const L=E();L>=-i&&L<=k()&&(z+=1,G=j>i);break}case 2:z=8,C!==0&&(b=!0,z+=1),C=0,B=0,p=_;break;case 3:{const T=u.filter(([O,j])=>c.t[O]!==j);if(!T.length)break;y(T.reduce((O,[j,L])=>((B===2||(p?!g&&j<p[0]:n(j)+(C===0&&B===0?d(j):0)<E()))&&(O+=L-d(j)),O),0));for(const[O,j]of T){const L=d(O),D=we(c,O,j);v&&(h+=D?j:j-L)}v&&i&&h>i&&(y(((O,j)=>{let L=0;const D=[];O.t.forEach((se,me)=>{se!==F&&(D.push(se),me<j&&L++)}),O.i=-1;const U=ce(D),ne=U.length,Q=ne/2|0,ve=ne%2==0?(U[Q-1]+U[Q])/2:U[Q],he=O.o;return((O.o=ve)-he)*H(j-L,0)})(c,A(c,m()))),v=!1),z=3,G=!0;break}case 4:i!==u&&(i=u,z=3);break;case 5:u[1]?(y(ue(c,u[0],!0)),B=2,z=1):(ue(c,u[0]),z=1);break;case 6:x=u;break;case 7:B=1;break;case 8:p=S(u),z=1}z&&(l=[],b&&I&&(q+=I,I=0,P++),M.forEach(([T,O])=>{z&T&&O(G)}))}}},ee=setTimeout,J=(e,t)=>t&&fe()?-e:e,Ie=(e,t,o,a,f,v)=>{const g=Date.now;let l=0,i=!1,x=!1,w=!1,P=!1;const q=(()=>{let p;const r=()=>{p!=_&&clearTimeout(p)},h=()=>{r(),p=ee(()=>{p=_,(()=>{if(i||x)return i=!1,void q();w=!1,e.H(2)})()},150)};return h.J=r,h})(),I=()=>{l=g(),w&&(P=!0),e.H(1,a()),q()},N=p=>{if(i||!e.P()||p.ctrlKey)return;const r=g()-l;150>r&&50<r&&(o?p.deltaX:p.deltaY)&&(i=!0)},C=()=>{x=!0,w=P=!1},B=()=>{x=!1,pe()&&(w=!0)};return t.addEventListener("scroll",I),t.addEventListener("wheel",N,{passive:!0}),t.addEventListener("touchstart",C,{passive:!0}),t.addEventListener("touchend",B,{passive:!0}),{F:()=>{t.removeEventListener("scroll",I),t.removeEventListener("wheel",N),t.removeEventListener("touchstart",C),t.removeEventListener("touchend",B),q.J()},L:()=>{const[p,r]=e.A();p&&(f(J(p,o),r,P),P=!1,r&&e.p()>e.M()&&e.H(1,a()))}}},Me=e=>{let t;return{W(o){(t||(t=new(xe(ze(o))).ResizeObserver(e))).observe(o)},X(o){t.unobserve(o)},F(){t&&t.disconnect()}}},qe=te({props:{Y:{type:Object,required:!0},U:{type:Object,required:!0},V:{type:Object,required:!0},D:{type:Function,required:!0},G:{type:Number,required:!0},K:{type:Boolean},Z:{type:Boolean},ee:{type:String,required:!0},te:Object},setup(e){const t=W(),o=Y(()=>e.Y.value&&e.U.j(e.G)),a=Y(()=>e.Y.value&&e.U.k(e.G));return K(()=>t.value&&e.G,(f,v,g)=>{g(e.D(t.value,e.G))},{flush:"post"}),()=>{var f;const{V:v,K:g,Z:l,ee:i}=e,x=a.value,{style:w,...P}=(f=e.te)!==null&&f!==void 0?f:{},q={position:x&&l?void 0:"absolute",[g?"height":"width"]:"100%",[g?"top":"left"]:"0px",[g?fe()?"right":"left":"top"]:o.value+"px",visibility:!x||l?"visible":"hidden",...w};return g&&(q.display="flex"),V(i,ge({ref:t,style:q},P),typeof(I=v)=="function"||Object.prototype.toString.call(I)==="[object Object]"&&!re(I)?v:{default:()=>[v],_:2},16,["style"]);var I}}}),Te=(e,t)=>{const o=e.key;return o??"_"+t},Ce=(e,t)=>e[0]===t[0]&&e[1]===t[1],Pe=te({props:{data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},emits:["scroll","scrollEnd"],setup(e,{emit:t,expose:o,slots:a}){let f=!!e.ssrCount;const v=e.horizontal,g=W(),l=je(e.data.length,e.itemSize,e.overscan,e.ssrCount,0,!e.itemSize),i=((r,h)=>{let c;const M=h?"width":"height",E=new WeakMap,m=Me(S=>{const k=[];for(const{target:n,contentRect:d}of S)if(n.offsetParent)if(n===c)r.H(4,d[M]);else{const y=E.get(n);y!=_&&k.push([y,d[M]])}k.length&&r.H(3,k)});return{re(S){m.W(c=S)},oe:(S,k)=>(E.set(S,k),m.W(S),()=>{E.delete(S),m.X(S)}),ne:m.F}})(l,v),x=((r,h)=>{let c,M,E;const m=h?"scrollLeft":"scrollTop",S=h?"overflowX":"overflowY",k=async(n,d)=>{if(!c)return void ie(()=>k(n,d));E&&E();const y=()=>{let s;return[new Promise((u,b)=>{s=u,E=b,Oe(r)&&ee(b,150)}),r.C(2,()=>{s&&s()})]};if(d&&Ee()){for(;r.H(8,n()),r.O();){const[s,u]=y();try{await s}catch{return}finally{u()}}c.scrollTo({[h?"left":"top"]:J(n(),h),behavior:"smooth"})}else for(;;){const[s,u]=y();try{c[m]=J(n(),h),r.H(7),await s}catch{return}finally{u()}}};return{se(n){c=n,M=Ie(r,n,h,()=>J(n[m],h),(d,y,s)=>{if(s){const u=n.style,b=u[S];u[S]="hidden",ee(()=>{u[S]=b})}y?(n[m]=r.q()+d,E&&E()):n[m]+=d})},ne(){M&&M.F()},ie(n){k(()=>n)},le(n){n+=r.q(),k(()=>n)},ce(n,{align:d,smooth:y,offset:s=0}={}){if(n=ae(n,0,r.B()-1),d==="nearest"){const u=r.j(n),b=r.q();if(u<b)d="start";else{if(!(u+r.T(n)>b+r.p()))return;d="end"}}k(()=>s+r.R()+r.j(n)+(d==="end"?r.T(n)-r.p():d==="center"?(r.T(n)-r.p())/2:0),y)},ae:()=>{M&&M.L()}}})(l,v),w=W(l.h()),P=l.C(1,()=>{w.value=l.h()}),q=l.C(4,()=>{t("scroll",l.q())}),I=l.C(8,()=>{t("scrollEnd")}),N=Y(r=>{w.value;const h=l.v();return r&&Ce(r,h)?r:h}),C=Y(()=>w.value&&l.P()),B=Y(()=>w.value&&l.M()),p=Y(()=>w.value&&l.N());return ye(()=>{f=!1,ie(()=>{const r=h=>{i.re(h),x.se(h)};e.scrollRef?r(e.scrollRef):r(g.value.parentElement)})}),be(()=>{P(),q(),I(),i.ne(),x.ne()}),K(()=>e.data.length,r=>{l.H(5,[r,e.shift])}),K(()=>e.startMargin,r=>{l.H(6,r)},{immediate:!0}),K([p],()=>{x.ae()},{flush:"post"}),o({get scrollOffset(){return l.q()},get scrollSize(){return(r=>H(r.M(),r.p()))(l)},get viewportSize(){return l.p()},findStartIndex:l.S,findEndIndex:l.I,getItemOffset:l.j,getItemSize:l.T,scrollToIndex:x.ce,scrollTo:x.ie,scrollBy:x.le}),()=>{const r=e.as,h=e.item,[c,M]=N.value,E=B.value,m=[];function S(n){var d;const y=a.default({item:e.data[n],index:n})[0];return V(qe,{key:Te(y,n),Y:w,U:l,D:i.oe,G:n,V:y,K:v,Z:f,ee:h,te:(d=e.itemProps)===null||d===void 0?void 0:d.call(e,{item:e.data[n],index:n})},null,8,["Y","U","D","G","V","K","Z","ee","te"])}for(let n=c,d=M;n<=d;n++)m.push(S(n));if(e.keepMounted){const n=[],d=[];ce(e.keepMounted).forEach(y=>{y<c&&n.push(S(y)),y>M&&d.push(S(y))}),m.unshift(...n),m.push(...d)}return V(r,{ref:g,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:v?E+"px":"100%",height:v?"100%":E+"px",pointerEvents:C.value?"none":void 0}},typeof(k=m)=="function"||Object.prototype.toString.call(k)==="[object Object]"&&!re(k)?m:{default:()=>[m],_:2},8,["style"]);var k}}}),Ne=te({props:{data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,ssrCount:Number,itemProps:Function,keepMounted:Array},emits:["scroll","scrollEnd"],setup(e,{emit:t,expose:o,slots:a}){const f=e.horizontal,v=i=>{t("scroll",i)},g=()=>{t("scrollEnd")},l=W();return o({get scrollOffset(){return l.value.scrollOffset},get scrollSize(){return l.value.scrollSize},get viewportSize(){return l.value.viewportSize},findStartIndex:(...i)=>l.value.findStartIndex(...i),findEndIndex:(...i)=>l.value.findEndIndex(...i),getItemOffset:(...i)=>l.value.getItemOffset(...i),getItemSize:(...i)=>l.value.getItemSize(...i),scrollToIndex:(...i)=>l.value.scrollToIndex(...i),scrollTo:(...i)=>l.value.scrollTo(...i),scrollBy:(...i)=>l.value.scrollBy(...i)}),()=>{return V("div",{style:{display:f?"inline-block":"block",[f?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%"}},[V(Pe,{ref:l,data:e.data,overscan:e.overscan,itemSize:e.itemSize,itemProps:e.itemProps,shift:e.shift,ssrCount:e.ssrCount,horizontal:f,keepMounted:e.keepMounted,onScroll:v,onScrollEnd:g},(i=a,typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!re(i)?a:{default:()=>[a],_:2}),8,["data","overscan","itemSize","itemProps","shift","ssrCount","horizontal","keepMounted","onScroll","onScrollEnd"])],4);var i}}});export{Ne as F};
