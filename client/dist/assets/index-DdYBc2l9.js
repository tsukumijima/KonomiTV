import{F as te,G as W,c as V,c8 as re,d as Y,ab as ye,ac as be,a9 as K,ao as ge}from"./index-LUcZSfg3.js";const _=null,{min:F,max:H,abs:le,floor:Se}=Math,ue=(e,t,o)=>F(o,H(t,e)),ce=e=>[...e].sort((t,o)=>t-o),ie=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},oe=e=>{let t,o;return()=>(t||(t=!0,o=e()),o)},R=-1,Z=(e,t,o)=>{const u=o?"unshift":"push";for(let f=0;f<t;f++)e[u](R);return e},$=(e,t)=>{const o=e.t[t];return o===R?e.o:o},we=(e,t,o)=>{const u=e.t[t]===R;return e.t[t]=o,e.i=F(t,e.i),u},X=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let o=e.i,u=e.u[o];for(;o<t;)u+=$(e,o),e.u[++o]=u;return e.i=t,u},A=(e,t,o=0,u=e.l-1)=>{for(;o<=u;){const f=Se((o+u)/2),v=X(e,f);if(v<=t){if(v+$(e,f)>t)return f;o=f+1}else u=f-1}return ue(o,0,e.l-1)},ae=(e,t,o)=>{const u=t-e.l;return e.i=o?-1:F(t-1,e.i),e.l=t,u>0?(Z(e.u,u),Z(e.t,u,o),e.o*u):(e.u.splice(u),(o?e.t.splice(0,-u):e.t.splice(u)).reduce((f,v)=>f-(v===R?e.o:v),0))},ke=typeof window<"u",de=()=>document.documentElement,ze=e=>e.ownerDocument,Ee=e=>e.defaultView,fe=oe(()=>!!ke&&getComputedStyle(de()).direction==="rtl"),pe=oe(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),xe=oe(()=>"scrollBehavior"in de().style),Oe=e=>!!e.p(),je=(e,t=40,o=4,u=0,f,v=!1)=>{let g=!!u,l=[],i=0,E=0,w=0,P=0,q=0,I=0,N=0,C=0,B=0,p=g?[0,H(u-1,0)]:_,r=[0,0],h=0;const c=((s,a)=>({o:a,t:Z([],s),l:s,i:-1,u:Z([],s)}))(e,t),M=new Set,x=()=>w-E,m=()=>x()+I+q,S=s=>((a,b,G,z)=>{if(z=F(z,a.l-1),X(a,z)<=b){const T=A(a,b+G,z);return[A(a,b,z,T),T]}{const T=A(a,b,void 0,z);return[T,A(a,b+G,T)]}})(c,s,i,r[0]),k=()=>(s=>s.l?X(s,s.l-1)+$(s,s.l-1):0)(c),n=s=>X(c,s)-I,d=s=>$(c,s),y=s=>{s&&(pe()&&C!==0?I+=s:(q+=s,P++))};return{h:()=>l,m:()=>(s=>[s.t.slice(),s.o])(c),v:()=>{if(N)return r;let[s,a]=S(H(0,m()));return p&&(s=F(s,p[0]),a=H(a,p[1])),C!==1&&(s-=H(0,o)),C!==2&&(a+=H(0,o)),r=[H(s,0),F(a,c.l-1)]},S:()=>A(c,m()),I:()=>A(c,m()+i),k:s=>c.t[s]===R,O:()=>!!p&&c.t.slice(H(0,p[0]-1),F(c.l-1,p[1]+1)+1).includes(R),j:n,T:d,B:()=>c.l,q:()=>w,P:()=>C!==0,p:()=>i,R:()=>E,M:k,N:()=>P,A:()=>(N=q,q=0,[N,B===2||x()+i>=k()]),C:(s,a)=>{const b=[s,a];return M.add(b),()=>{M.delete(b)}},H:(s,a)=>{let b,G,z=0;switch(s){case 1:{const T=N;N=0;const O=a-w,j=le(O);T&&j<le(T)+1||B!==0||(C=O<0?2:1),g&&(p=_,g=!1),w=a,z=4;const L=x();L>=-i&&L<=k()&&(z+=1,G=j>i);break}case 2:z=8,C!==0&&(b=!0,z+=1),C=0,B=0,p=_;break;case 3:{const T=a.filter(([O,j])=>c.t[O]!==j);if(!T.length)break;y(T.reduce((O,[j,L])=>((B===2||(p?!g&&j<p[0]:n(j)+(C===0&&B===0?d(j):0)<x()))&&(O+=L-d(j)),O),0));for(const[O,j]of T){const L=d(O),D=we(c,O,j);v&&(h+=D?j:j-L)}v&&i&&h>i&&(y(((O,j)=>{let L=0;const D=[];O.t.forEach((se,me)=>{se!==R&&(D.push(se),me<j&&L++)}),O.i=-1;const U=ce(D),ne=U.length,Q=ne/2|0,ve=ne%2==0?(U[Q-1]+U[Q])/2:U[Q],he=O.o;return((O.o=ve)-he)*H(j-L,0)})(c,A(c,m()))),v=!1),z=3,G=!0;break}case 4:i!==a&&(i=a,z=3);break;case 5:a[1]?(y(ae(c,a[0],!0)),B=2,z=1):(ae(c,a[0]),z=1);break;case 6:E=a;break;case 7:B=1;break;case 8:p=S(a),z=1}z&&(l=[],b&&I&&(q+=I,I=0,P++),M.forEach(([T,O])=>{z&T&&O(G)}))}}},ee=setTimeout,J=(e,t)=>t&&fe()?-e:e,Ie=(e,t,o,u,f,v)=>{const g=Date.now;let l=0,i=!1,E=!1,w=!1,P=!1;const q=(()=>{let p;const r=()=>{p!=_&&clearTimeout(p)},h=()=>{r(),p=ee(()=>{p=_,(()=>{if(i||E)return i=!1,void q();w=!1,e.H(2)})()},150)};return h.J=r,h})(),I=()=>{l=g(),w&&(P=!0),e.H(1,u()),q()},N=p=>{if(i||!e.P()||p.ctrlKey)return;const r=g()-l;150>r&&50<r&&(o?p.deltaX:p.deltaY)&&(i=!0)},C=()=>{E=!0,w=P=!1},B=()=>{E=!1,pe()&&(w=!0)};return t.addEventListener("scroll",I),t.addEventListener("wheel",N,{passive:!0}),t.addEventListener("touchstart",C,{passive:!0}),t.addEventListener("touchend",B,{passive:!0}),{F:()=>{t.removeEventListener("scroll",I),t.removeEventListener("wheel",N),t.removeEventListener("touchstart",C),t.removeEventListener("touchend",B),q.J()},L:()=>{const[p,r]=e.A();p&&(f(J(p,o),r,P),P=!1,r&&e.p()>e.M()&&e.H(1,u()))}}},Me=e=>{let t;return{W(o){(t||(t=new(Ee(ze(o))).ResizeObserver(e))).observe(o)},X(o){t.unobserve(o)},F(){t&&t.disconnect()}}},qe=te({props:{Y:{type:Object,required:!0},U:{type:Object,required:!0},V:{type:Object,required:!0},D:{type:Function,required:!0},G:{type:Number,required:!0},K:{type:Boolean},Z:{type:Boolean},ee:{type:String,required:!0},te:Object},setup(e){const t=W(),o=Y(()=>e.Y.value&&e.U.j(e.G)),u=Y(()=>e.Y.value&&e.U.k(e.G));return K(()=>t.value&&e.G,(f,v,g)=>{g(e.D(t.value,e.G))},{flush:"post"}),()=>{var f;const{V:v,K:g,Z:l,ee:i}=e,E=u.value,{style:w,...P}=(f=e.te)!==null&&f!==void 0?f:{},q={position:E&&l?void 0:"absolute",[g?"height":"width"]:"100%",[g?"top":"left"]:"0px",[g?fe()?"right":"left":"top"]:o.value+"px",visibility:!E||l?"visible":"hidden",...w};return g&&(q.display="flex"),V(i,ge({ref:t,style:q},P),typeof(I=v)=="function"||Object.prototype.toString.call(I)==="[object Object]"&&!re(I)?v:{default:()=>[v],_:2},16,["style"]);var I}}}),Te=(e,t)=>{const o=e.key;return o??"_"+t},Ce=(e,t)=>e[0]===t[0]&&e[1]===t[1],Pe=te({props:{data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},emits:["scroll","scrollEnd"],setup(e,{emit:t,expose:o,slots:u}){let f=!!e.ssrCount;const v=e.horizontal,g=W(),l=je(e.data.length,e.itemSize,e.overscan,e.ssrCount,0,!e.itemSize),i=((r,h)=>{let c;const M=h?"width":"height",x=new WeakMap,m=Me(S=>{const k=[];for(const{target:n,contentRect:d}of S)if(n.offsetParent)if(n===c)r.H(4,d[M]);else{const y=x.get(n);y!=_&&k.push([y,d[M]])}k.length&&r.H(3,k)});return{re(S){m.W(c=S)},oe:(S,k)=>(x.set(S,k),m.W(S),()=>{x.delete(S),m.X(S)}),ne:m.F}})(l,v),E=((r,h)=>{let c,M,x;const m=h?"scrollLeft":"scrollTop",S=h?"overflowX":"overflowY",k=async(n,d)=>{if(!c)return void ie(()=>k(n,d));x&&x();const y=()=>{let s;return[new Promise((a,b)=>{s=a,x=b,Oe(r)&&ee(b,150)}),r.C(2,()=>{s&&s()})]};if(d&&xe()){for(;r.H(8,n()),r.O();){const[s,a]=y();try{await s}catch{return}finally{a()}}c.scrollTo({[h?"left":"top"]:J(n(),h),behavior:"smooth"})}else for(;;){const[s,a]=y();try{c[m]=J(n(),h),r.H(7),await s}catch{return}finally{a()}}};return{se(n){c=n,M=Ie(r,n,h,()=>J(n[m],h),(d,y,s)=>{if(s){const a=n.style,b=a[S];a[S]="hidden",ee(()=>{a[S]=b})}y?(n[m]=r.q()+d,x&&x()):n[m]+=d})},ne(){M&&M.F()},ie(n){k(()=>n)},le(n){n+=r.q(),k(()=>n)},ce(n,{align:d,smooth:y,offset:s=0}={}){if(n=ue(n,0,r.B()-1),d==="nearest"){const a=r.j(n),b=r.q();if(a<b)d="start";else{if(!(a+r.T(n)>b+r.p()))return;d="end"}}k(()=>s+r.R()+r.j(n)+(d==="end"?r.T(n)-r.p():d==="center"?(r.T(n)-r.p())/2:0),y)},ae:()=>{M&&M.L()}}})(l,v),w=W(l.h()),P=l.C(1,()=>{w.value=l.h()}),q=l.C(4,()=>{t("scroll",l.q())}),I=l.C(8,()=>{t("scrollEnd")}),N=Y(r=>{w.value;const h=l.v();return r&&Ce(r,h)?r:h}),C=Y(()=>w.value&&l.P()),B=Y(()=>w.value&&l.M()),p=Y(()=>w.value&&l.N());return ye(()=>{f=!1,ie(()=>{const r=h=>{i.re(h),E.se(h)};e.scrollRef?r(e.scrollRef):r(g.value.parentElement)})}),be(()=>{P(),q(),I(),i.ne(),E.ne()}),K(()=>e.data.length,r=>{l.H(5,[r,e.shift])}),K(()=>e.startMargin,r=>{l.H(6,r)},{immediate:!0}),K([p],()=>{E.ae()},{flush:"post"}),o({get scrollOffset(){return l.q()},get scrollSize(){return(r=>H(r.M(),r.p()))(l)},get viewportSize(){return l.p()},findStartIndex:l.S,findEndIndex:l.I,getItemOffset:l.j,getItemSize:l.T,scrollToIndex:E.ce,scrollTo:E.ie,scrollBy:E.le}),()=>{const r=e.as,h=e.item,[c,M]=N.value,x=B.value,m=[];function S(n){var d;const y=u.default({item:e.data[n],index:n})[0];return V(qe,{key:Te(y,n),Y:w,U:l,D:i.oe,G:n,V:y,K:v,Z:f,ee:h,te:(d=e.itemProps)===null||d===void 0?void 0:d.call(e,{item:e.data[n],index:n})},null,8,["Y","U","D","G","V","K","Z","ee","te"])}for(let n=c,d=M;n<=d;n++)m.push(S(n));if(e.keepMounted){const n=[],d=[];ce(e.keepMounted).forEach(y=>{y<c&&n.push(S(y)),y>M&&d.push(S(y))}),m.unshift(...n),m.push(...d)}return V(r,{ref:g,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:v?x+"px":"100%",height:v?"100%":x+"px",pointerEvents:C.value?"none":void 0}},typeof(k=m)=="function"||Object.prototype.toString.call(k)==="[object Object]"&&!re(k)?m:{default:()=>[m],_:2},8,["style"]);var k}}}),Ne=te({props:{data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,ssrCount:Number,itemProps:Function,keepMounted:Array},emits:["scroll","scrollEnd"],setup(e,{emit:t,expose:o,slots:u}){const f=e.horizontal,v=i=>{t("scroll",i)},g=()=>{t("scrollEnd")},l=W();return o({get scrollOffset(){return l.value.scrollOffset},get scrollSize(){return l.value.scrollSize},get viewportSize(){return l.value.viewportSize},findStartIndex:(...i)=>l.value.findStartIndex(...i),findEndIndex:(...i)=>l.value.findEndIndex(...i),getItemOffset:(...i)=>l.value.getItemOffset(...i),getItemSize:(...i)=>l.value.getItemSize(...i),scrollToIndex:(...i)=>l.value.scrollToIndex(...i),scrollTo:(...i)=>l.value.scrollTo(...i),scrollBy:(...i)=>l.value.scrollBy(...i)}),()=>{return V("div",{style:{display:f?"inline-block":"block",[f?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%"}},[V(Pe,{ref:l,data:e.data,overscan:e.overscan,itemSize:e.itemSize,itemProps:e.itemProps,shift:e.shift,ssrCount:e.ssrCount,horizontal:f,keepMounted:e.keepMounted,onScroll:v,onScrollEnd:g},(i=u,typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!re(i)?u:{default:()=>[u],_:2}),8,["data","overscan","itemSize","itemProps","shift","ssrCount","horizontal","keepMounted","onScroll","onScrollEnd"])],4);var i}}});export{Ne as F};
